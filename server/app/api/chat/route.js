(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[744],{67:e=>{"use strict";e.exports=require("node:async_hooks")},195:e=>{"use strict";e.exports=require("node:buffer")},581:(e,t,r)=>{"use strict";let n,s,i,a,o,l,u,c,h,d,f,p,g;r.r(t),r.d(t,{ComponentMod:()=>sI,default:()=>sN});var m,y,v,w,b,_,x,S,E,C,R,A,P,O,T,k,$,I,N,j,M,D,L,U,q,H,F,B,W,J,V,X,G,z,K,Y,Q,Z,ee,et,er,en,es,ei,ea,eo,el,eu,ec,eh,ed,ef,ep,eg,em,ey,ev,ew,eb={};r.r(eb),r.d(eb,{APIConnectionError:()=>rH,APIConnectionTimeoutError:()=>rF,APIError:()=>rU,APIUserAbortError:()=>rq,AuthenticationError:()=>rW,BadRequestError:()=>rB,ConflictError:()=>rX,n:()=>rQ,InternalServerError:()=>rK,M:()=>rY,NotFoundError:()=>rV,OpenAIError:()=>rL,PermissionDeniedError:()=>rJ,RateLimitError:()=>rz,UnprocessableEntityError:()=>rG});var e_={};r.r(e_),r.d(e_,{POST:()=>sR,runtime:()=>sC});var ex={};async function eS(){let e="_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&(await _ENTRIES.middleware_instrumentation).register;if(e)try{await e()}catch(e){throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}r.r(ex),r.d(ex,{originalPathname:()=>sk,patchFetch:()=>s$,requestAsyncStorage:()=>sP,routeModule:()=>sA,serverHooks:()=>sT,staticGenerationAsyncStorage:()=>sO});let eE=null;function eC(){return eE||(eE=eS()),eE}function eR(e){return`The edge runtime does not support Node.js '${e}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==r.g.process&&(process.env=r.g.process.env,r.g.process=process),Object.defineProperty(globalThis,"__import_unsupported",{value:function(e){let t=new Proxy(function(){},{get(t,r){if("then"===r)return{};throw Error(eR(e))},construct(){throw Error(eR(e))},apply(r,n,s){if("function"==typeof s[0])return s[0](t);throw Error(eR(e))}});return new Proxy({},{get:()=>t})},enumerable:!1,configurable:!1}),eC();class eA extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class eP extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class eO extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}var eT=r(573);let ek=Symbol("response"),e$=Symbol("passThrough"),eI=Symbol("waitUntil");class eN{constructor(e){this[eI]=[],this[e$]=!1}respondWith(e){this[ek]||(this[ek]=Promise.resolve(e))}passThroughOnException(){this[e$]=!0}waitUntil(e){this[eI].push(e)}}class ej extends eN{constructor(e){super(e.request),this.sourcePage=e.page}get request(){throw new eA({page:this.sourcePage})}respondWith(){throw new eA({page:this.sourcePage})}}function eM(e){return e.replace(/\/$/,"")||"/"}function eD(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function eL(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:s}=eD(e);return""+t+r+n+s}function eU(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:s}=eD(e);return""+r+t+n+s}function eq(e,t){if("string"!=typeof e)return!1;let{pathname:r}=eD(e);return r===t||r.startsWith(t+"/")}function eH(e,t){let r;let n=e.split("/");return(t||[]).some(t=>!!n[1]&&n[1].toLowerCase()===t.toLowerCase()&&(r=t,n.splice(1,1),e=n.join("/")||"/",!0)),{pathname:e,detectedLocale:r}}let eF=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function eB(e,t){return new URL(String(e).replace(eF,"localhost"),t&&String(t).replace(eF,"localhost"))}let eW=Symbol("NextURLInternal");class eJ{constructor(e,t,r){let n,s;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,s=r||{}):s=r||t||{},this[eW]={url:eB(e,n??s.base),options:s,basePath:""},this.analyze()}analyze(){var e,t,r,n,s;let i=function(e,t){var r,n;let{basePath:s,i18n:i,trailingSlash:a}=null!=(r=t.nextConfig)?r:{},o={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):a};s&&eq(o.pathname,s)&&(o.pathname=function(e,t){if(!eq(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}(o.pathname,s),o.basePath=s);let l=o.pathname;if(o.pathname.startsWith("/_next/data/")&&o.pathname.endsWith(".json")){let e=o.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),r=e[0];o.buildId=r,l="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===t.parseData&&(o.pathname=l)}if(i){let e=t.i18nProvider?t.i18nProvider.analyze(o.pathname):eH(o.pathname,i.locales);o.locale=e.detectedLocale,o.pathname=null!=(n=e.pathname)?n:o.pathname,!e.detectedLocale&&o.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(l):eH(l,i.locales)).detectedLocale&&(o.locale=e.detectedLocale)}return o}(this[eW].url.pathname,{nextConfig:this[eW].options.nextConfig,parseData:!0,i18nProvider:this[eW].options.i18nProvider}),a=function(e,t){let r;if((null==t?void 0:t.host)&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}(this[eW].url,this[eW].options.headers);this[eW].domainLocale=this[eW].options.i18nProvider?this[eW].options.i18nProvider.detectDomainLocale(a):function(e,t,r){if(e)for(let i of(r&&(r=r.toLowerCase()),e)){var n,s;if(t===(null==(n=i.domain)?void 0:n.split(":",1)[0].toLowerCase())||r===i.defaultLocale.toLowerCase()||(null==(s=i.locales)?void 0:s.some(e=>e.toLowerCase()===r)))return i}}(null==(t=this[eW].options.nextConfig)?void 0:null==(e=t.i18n)?void 0:e.domains,a);let o=(null==(r=this[eW].domainLocale)?void 0:r.defaultLocale)||(null==(s=this[eW].options.nextConfig)?void 0:null==(n=s.i18n)?void 0:n.defaultLocale);this[eW].url.pathname=i.pathname,this[eW].defaultLocale=o,this[eW].basePath=i.basePath??"",this[eW].buildId=i.buildId,this[eW].locale=i.locale??o,this[eW].trailingSlash=i.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,n){if(!t||t===r)return e;let s=e.toLowerCase();return!n&&(eq(s,"/api")||eq(s,"/"+t.toLowerCase()))?e:eL(e,"/"+t)}((e={basePath:this[eW].basePath,buildId:this[eW].buildId,defaultLocale:this[eW].options.forceLocale?void 0:this[eW].defaultLocale,locale:this[eW].locale,pathname:this[eW].url.pathname,trailingSlash:this[eW].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=eM(t)),e.buildId&&(t=eU(eL(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=eL(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:eU(t,"/"):eM(t)}formatSearch(){return this[eW].url.search}get buildId(){return this[eW].buildId}set buildId(e){this[eW].buildId=e}get locale(){return this[eW].locale??""}set locale(e){var t,r;if(!this[eW].locale||!(null==(r=this[eW].options.nextConfig)?void 0:null==(t=r.i18n)?void 0:t.locales.includes(e)))throw TypeError(`The NextURL configuration includes no locale "${e}"`);this[eW].locale=e}get defaultLocale(){return this[eW].defaultLocale}get domainLocale(){return this[eW].domainLocale}get searchParams(){return this[eW].url.searchParams}get host(){return this[eW].url.host}set host(e){this[eW].url.host=e}get hostname(){return this[eW].url.hostname}set hostname(e){this[eW].url.hostname=e}get port(){return this[eW].url.port}set port(e){this[eW].url.port=e}get protocol(){return this[eW].url.protocol}set protocol(e){this[eW].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[eW].url=eB(e),this.analyze()}get origin(){return this[eW].url.origin}get pathname(){return this[eW].url.pathname}set pathname(e){this[eW].url.pathname=e}get hash(){return this[eW].url.hash}set hash(e){this[eW].url.hash=e}get search(){return this[eW].url.search}set search(e){this[eW].url.search=e}get password(){return this[eW].url.password}set password(e){this[eW].url.password=e}get username(){return this[eW].url.username}set username(e){this[eW].url.username=e}get basePath(){return this[eW].basePath}set basePath(e){this[eW].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new eJ(String(this),this[eW].options)}}var eV=r(101);let eX=Symbol("internal request");class eG extends Request{constructor(e,t={}){let r="string"!=typeof e&&"url"in e?e.url:String(e);(0,eT.r4)(r),e instanceof Request?super(e,t):super(r,t);let n=new eJ(r,{headers:(0,eT.lb)(this.headers),nextConfig:t.nextConfig});this[eX]={cookies:new eV.qC(this.headers),geo:t.geo||{},ip:t.ip,nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[eX].cookies}get geo(){return this[eX].geo}get ip(){return this[eX].ip}get nextUrl(){return this[eX].nextUrl}get page(){throw new eP}get ua(){throw new eO}get url(){return this[eX].url}}var ez=r(42);let eK=Symbol("internal response"),eY=new Set([301,302,303,307,308]);function eQ(e,t){var r;if(null==e?void 0:null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let r=[];for(let[n,s]of e.request.headers)t.set("x-middleware-request-"+n,s),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class eZ extends Response{constructor(e,t={}){super(e,t);let r=this.headers,n=new Proxy(new eV.nV(r),{get(e,n,s){switch(n){case"delete":case"set":return(...s)=>{let i=Reflect.apply(e[n],e,s),a=new Headers(r);return i instanceof eV.nV&&r.set("x-middleware-set-cookie",i.getAll().map(e=>(0,eV.Q7)(e)).join(",")),eQ(t,a),i};default:return ez.g.get(e,n,s)}}});this[eK]={cookies:n,url:t.url?new eJ(t.url,{headers:(0,eT.lb)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[eK].cookies}static json(e,t){let r=Response.json(e,t);return new eZ(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!eY.has(r))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let n="object"==typeof t?t:{},s=new Headers(null==n?void 0:n.headers);return s.set("Location",(0,eT.r4)(e)),new eZ(null,{...n,headers:s,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,eT.r4)(e)),eQ(t,r),new eZ(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),eQ(e,t),new eZ(null,{...e,headers:t})}}function e0(e,t){let r="string"==typeof t?new URL(t):t,n=new URL(e,t),s=r.protocol+"//"+r.host;return n.protocol+"//"+n.host===s?n.toString().replace(s,""):n.toString()}var e1=r(39);let e2=["__nextFallback","__nextLocale","__nextInferredLocaleFromDefault","__nextDefaultLocale","__nextIsNotFound",e1.H4],e4=["__nextDataReq"];function e3(e){return e.startsWith("/")?e:"/"+e}function e6(e){return e.replace(/\.rsc($|\?)/,"$1")}var e8=r(927),e9=r(988),e5=r(983),e7=r(991),te=r(816);function tt(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID,previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}class tr extends eG{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw new eA({page:this.sourcePage})}respondWith(){throw new eA({page:this.sourcePage})}waitUntil(){throw new eA({page:this.sourcePage})}}let tn={keys:e=>Array.from(e.keys()),get:(e,t)=>e.get(t)??void 0},ts=(e,t)=>(0,e7.Yz)().withPropagatedContext(e.headers,t,tn),ti=!1;async function ta(e){let t,n;!function(){if(!ti&&(ti=!0,"true"===process.env.NEXT_PRIVATE_TEST_PROXY)){let{interceptTestApis:e,wrapRequestHandler:t}=r(730);e(),ts=t(ts)}}(),await eC();let s=void 0!==self.__BUILD_MANIFEST;e.request.url=e6(e.request.url);let i=new eJ(e.request.url,{headers:e.request.headers,nextConfig:e.request.nextConfig});for(let e of[...i.searchParams.keys()]){let t=i.searchParams.getAll(e);if(e!==e8.dN&&e.startsWith(e8.dN)){let r=e.substring(e8.dN.length);for(let e of(i.searchParams.delete(r),t))i.searchParams.append(r,e);i.searchParams.delete(e)}}let a=i.buildId;i.buildId="";let o=e.request.headers["x-nextjs-data"];o&&"/index"===i.pathname&&(i.pathname="/");let l=(0,eT.EK)(e.request.headers),u=new Map;if(!s)for(let e of e1.vu){let t=e.toString().toLowerCase();l.get(t)&&(u.set(t,l.get(t)),l.delete(t))}let c=new tr({page:e.page,input:(function(e,t){let r="string"==typeof e,n=r?new URL(e):e;for(let e of e2)n.searchParams.delete(e);if(t)for(let e of e4)n.searchParams.delete(e);return r?n.toString():n})(i,!0).toString(),init:{body:e.request.body,geo:e.request.geo,headers:l,ip:e.request.ip,method:e.request.method,nextConfig:e.request.nextConfig,signal:e.request.signal}});o&&Object.defineProperty(c,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCache&&e.IncrementalCache&&(globalThis.__incrementalCache=new e.IncrementalCache({appDir:!0,fetchCache:!0,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:e.request.headers,requestProtocol:"https",getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:tt()})}));let h=new ej({request:c,page:e.page});if((t=await ts(c,()=>"/middleware"===e.page||"/src/middleware"===e.page?(0,e7.Yz)().trace(te.dI.execute,{spanName:`middleware ${c.method} ${c.nextUrl.pathname}`,attributes:{"http.target":c.nextUrl.pathname,"http.method":c.method}},()=>e9.B.wrap(e5.O,{req:c,renderOpts:{onUpdateCookies:e=>{n=e},previewProps:tt()}},()=>e.handler(c,h))):e.handler(c,h)))&&!(t instanceof Response))throw TypeError("Expected an instance of Response to be returned");t&&n&&t.headers.set("set-cookie",n);let d=null==t?void 0:t.headers.get("x-middleware-rewrite");if(t&&d&&!s){let r=new eJ(d,{forceLocale:!0,headers:e.request.headers,nextConfig:e.request.nextConfig});r.host===c.nextUrl.host&&(r.buildId=a||r.buildId,t.headers.set("x-middleware-rewrite",String(r)));let n=e0(String(r),String(i));o&&t.headers.set("x-nextjs-rewrite",n)}let f=null==t?void 0:t.headers.get("Location");if(t&&f&&!s){let r=new eJ(f,{forceLocale:!1,headers:e.request.headers,nextConfig:e.request.nextConfig});t=new Response(t.body,t),r.host===c.nextUrl.host&&(r.buildId=a||r.buildId,t.headers.set("Location",String(r))),o&&(t.headers.delete("Location"),t.headers.set("x-nextjs-redirect",e0(String(r),String(i))))}let p=t||eZ.next(),g=p.headers.get("x-middleware-override-headers"),m=[];if(g){for(let[e,t]of u)p.headers.set(`x-middleware-request-${e}`,t),m.push(e);m.length>0&&p.headers.set("x-middleware-override-headers",g+","+m.join(","))}return{response:p,waitUntil:Promise.all(h[eI]),fetchMetrics:c.fetchMetrics}}var to=r(996),tl=r.n(to);let tu=0,tc="x-vercel-cache-tags",th="x-vercel-sc-headers",td="x-vercel-revalidate",tf="x-vercel-cache-item-name",tp=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;async function tg(e,t,r=0){let n=new AbortController,s=setTimeout(()=>{n.abort()},500);return fetch(e,{...t||{},signal:n.signal}).catch(n=>{if(3!==r)return tp&&console.log(`Fetch failed for ${e} retry ${r}`),tg(e,t,r+1);throw n}).finally(()=>{clearTimeout(s)})}class tm{hasMatchingTags(e,t){if(e.length!==t.length)return!1;let r=new Set(e),n=new Set(t);if(r.size!==n.size)return!1;for(let e of r)if(!n.has(e))return!1;return!0}static isAvailable(e){return!!(e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL)}constructor(e){if(this.headers={},this.headers["Content-Type"]="application/json",th in e._requestHeaders){let t=JSON.parse(e._requestHeaders[th]);for(let e in t)this.headers[e]=t[e];delete e._requestHeaders[th]}let t=e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL,r=e._requestHeaders["x-vercel-sc-basepath"]||process.env.SUSPENSE_CACHE_BASEPATH;if(process.env.SUSPENSE_CACHE_AUTH_TOKEN&&(this.headers.Authorization=`Bearer ${process.env.SUSPENSE_CACHE_AUTH_TOKEN}`),t){let e=process.env.SUSPENSE_CACHE_PROTO||"https";this.cacheEndpoint=`${e}://${t}${r||""}`,tp&&console.log("using cache endpoint",this.cacheEndpoint)}else tp&&console.log("no cache endpoint available");e.maxMemoryCacheSize?n||(tp&&console.log("using memory store for fetch cache"),n=new(tl())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify("PAGE"===e.kind&&e.pageData))?void 0:t.length)||0)}})):tp&&console.log("not using memory store for fetch cache")}resetRequestCache(){null==n||n.reset()}async revalidateTag(...e){let[t]=e;if(t="string"==typeof t?[t]:t,tp&&console.log("revalidateTag",t),t.length){if(Date.now()<tu){tp&&console.log("rate limited ",tu);return}for(let e=0;e<Math.ceil(t.length/64);e++){let r=t.slice(64*e,64*e+64);try{let e=await tg(`${this.cacheEndpoint}/v1/suspense-cache/revalidate?tags=${r.map(e=>encodeURIComponent(e)).join(",")}`,{method:"POST",headers:this.headers,next:{internal:!0}});if(429===e.status){let t=e.headers.get("retry-after")||"60000";tu=Date.now()+parseInt(t)}if(!e.ok)throw Error(`Request failed with status ${e.status}.`)}catch(e){console.warn("Failed to revalidate tag",r,e)}}}}async get(...e){var t;let[r,s={}]=e,{tags:i,softTags:a,kindHint:o,fetchIdx:l,fetchUrl:u}=s;if("fetch"!==o)return null;if(Date.now()<tu)return tp&&console.log("rate limited"),null;let c=null==n?void 0:n.get(r),h=(null==c?void 0:null==(t=c.value)?void 0:t.kind)==="FETCH"&&this.hasMatchingTags(i??[],c.value.tags??[]);if(this.cacheEndpoint&&(!c||!h))try{let e=Date.now(),t=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${r}`,{method:"GET",headers:{...this.headers,[tf]:u,[tc]:(null==i?void 0:i.join(","))||"",[e8.Ar]:(null==a?void 0:a.join(","))||""},next:{internal:!0,fetchType:"cache-get",fetchUrl:u,fetchIdx:l}});if(429===t.status){let e=t.headers.get("retry-after")||"60000";tu=Date.now()+parseInt(e)}if(404===t.status)return tp&&console.log(`no fetch cache entry for ${r}, duration: ${Date.now()-e}ms`),null;if(!t.ok)throw console.error(await t.text()),Error(`invalid response from cache ${t.status}`);let s=await t.json();if(!s||"FETCH"!==s.kind)throw tp&&console.log({cached:s}),Error("invalid cache value");if("FETCH"===s.kind)for(let e of(s.tags??=[],i??[]))s.tags.includes(e)||s.tags.push(e);let o=t.headers.get("x-vercel-cache-state"),h=t.headers.get("age");c={value:s,lastModified:"fresh"!==o?Date.now()-e8.BR:Date.now()-1e3*parseInt(h||"0",10)},tp&&console.log(`got fetch cache entry for ${r}, duration: ${Date.now()-e}ms, size: ${Object.keys(s).length}, cache-state: ${o} tags: ${null==i?void 0:i.join(",")} softTags: ${null==a?void 0:a.join(",")}`),c&&(null==n||n.set(r,c))}catch(e){tp&&console.error("Failed to get from fetch-cache",e)}return c||null}async set(...e){let[t,r,s]=e,{fetchCache:i,fetchIdx:a,fetchUrl:o,tags:l}=s;if(i){if(Date.now()<tu){tp&&console.log("rate limited");return}if(null==n||n.set(t,{value:r,lastModified:Date.now()}),this.cacheEndpoint)try{let e=Date.now();null!==r&&"revalidate"in r&&(this.headers[td]=r.revalidate.toString()),!this.headers[td]&&null!==r&&"data"in r&&(this.headers["x-vercel-cache-control"]=r.data.headers["cache-control"]);let n=JSON.stringify({...r,tags:void 0});tp&&console.log("set cache",t);let s=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${t}`,{method:"POST",headers:{...this.headers,[tf]:o||"",[tc]:(null==l?void 0:l.join(","))||""},body:n,next:{internal:!0,fetchType:"cache-set",fetchUrl:o,fetchIdx:a}});if(429===s.status){let e=s.headers.get("retry-after")||"60000";tu=Date.now()+parseInt(e)}if(!s.ok)throw tp&&console.log(await s.text()),Error(`invalid response ${s.status}`);tp&&console.log(`successfully set to fetch-cache for ${t}, duration: ${Date.now()-e}ms, size: ${n.length}`)}catch(e){tp&&console.error("Failed to update fetch cache",e)}}}}var ty=r(863),tv=r.n(ty);class tw{constructor(e){this.fs=e.fs,this.flushToDisk=e.flushToDisk,this.serverDistDir=e.serverDistDir,this.appDir=!!e._appDir,this.pagesDir=!!e._pagesDir,this.revalidatedTags=e.revalidatedTags,this.experimental=e.experimental,this.debug=!!process.env.NEXT_PRIVATE_DEBUG_CACHE,e.maxMemoryCacheSize&&!s?(this.debug&&console.log("using memory store for fetch cache"),s=new(tl())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify(e.pageData))?void 0:t.length)||0)}})):this.debug&&console.log("not using memory store for fetch cache"),this.serverDistDir&&this.fs&&(this.tagsManifestPath=tv().join(this.serverDistDir,"..","cache","fetch-cache","tags-manifest.json"),this.loadTagsManifest())}resetRequestCache(){}loadTagsManifest(){if(this.tagsManifestPath&&this.fs&&!i){try{i=JSON.parse(this.fs.readFileSync(this.tagsManifestPath,"utf8"))}catch(e){i={version:1,items:{}}}this.debug&&console.log("loadTagsManifest",i)}}async revalidateTag(...e){let[t]=e;if(t="string"==typeof t?[t]:t,this.debug&&console.log("revalidateTag",t),0!==t.length&&(await this.loadTagsManifest(),i&&this.tagsManifestPath)){for(let e of t){let t=i.items[e]||{};t.revalidatedAt=Date.now(),i.items[e]=t}try{await this.fs.mkdir(tv().dirname(this.tagsManifestPath)),await this.fs.writeFile(this.tagsManifestPath,JSON.stringify(i||{})),this.debug&&console.log("Updated tags manifest",i)}catch(e){console.warn("Failed to update tags manifest.",e)}}}async get(...e){var t,r,n;let[a,o={}]=e,{tags:l,softTags:u,kindHint:c}=o,h=null==s?void 0:s.get(a);if(this.debug&&console.log("get",a,l,c,!!h),(null==h?void 0:null==(t=h.value)?void 0:t.kind)==="PAGE"){let e;let t=null==(n=h.value.headers)?void 0:n[e8.Et];"string"==typeof t&&(e=t.split(",")),(null==e?void 0:e.length)&&(this.loadTagsManifest(),e.some(e=>{var t;return(null==i?void 0:null==(t=i.items[e])?void 0:t.revalidatedAt)&&(null==i?void 0:i.items[e].revalidatedAt)>=((null==h?void 0:h.lastModified)||Date.now())})&&(h=void 0))}return h&&(null==h?void 0:null==(r=h.value)?void 0:r.kind)==="FETCH"&&(this.loadTagsManifest(),[...l||[],...u||[]].some(e=>{var t;return!!this.revalidatedTags.includes(e)||(null==i?void 0:null==(t=i.items[e])?void 0:t.revalidatedAt)&&(null==i?void 0:i.items[e].revalidatedAt)>=((null==h?void 0:h.lastModified)||Date.now())})&&(h=void 0)),h??null}async set(...e){let[t,r,n]=e;if(null==s||s.set(t,{value:r,lastModified:Date.now()}),this.debug&&console.log("set",t),this.flushToDisk){if((null==r?void 0:r.kind)==="ROUTE"){let e=this.getFilePath(`${t}.body`,"app");await this.fs.mkdir(tv().dirname(e)),await this.fs.writeFile(e,r.body);let n={headers:r.headers,status:r.status,postponed:void 0};await this.fs.writeFile(e.replace(/\.body$/,e8.EX),JSON.stringify(n,null,2));return}if((null==r?void 0:r.kind)==="PAGE"){let e="string"==typeof r.pageData,n=this.getFilePath(`${t}.html`,e?"app":"pages");if(await this.fs.mkdir(tv().dirname(n)),await this.fs.writeFile(n,r.html),await this.fs.writeFile(this.getFilePath(`${t}${e?this.experimental.ppr?e8.Sx:e8.hd:e8.JT}`,e?"app":"pages"),e?r.pageData:JSON.stringify(r.pageData)),r.headers||r.status){let e={headers:r.headers,status:r.status,postponed:r.postponed};await this.fs.writeFile(n.replace(/\.html$/,e8.EX),JSON.stringify(e))}}else if((null==r?void 0:r.kind)==="FETCH"){let e=this.getFilePath(t,"fetch");await this.fs.mkdir(tv().dirname(e)),await this.fs.writeFile(e,JSON.stringify({...r,tags:n.tags}))}}}detectFileKind(e){if(!this.appDir&&!this.pagesDir)throw Error("Invariant: Can't determine file path kind, no page directory enabled");if(!this.appDir&&this.pagesDir)return"pages";if(this.appDir&&!this.pagesDir)return"app";let t=this.getFilePath(e,"pages");if(this.fs.existsSync(t))return"pages";if(t=this.getFilePath(e,"app"),this.fs.existsSync(t))return"app";throw Error(`Invariant: Unable to determine file path kind for ${e}`)}getFilePath(e,t){switch(t){case"fetch":return tv().join(this.serverDistDir,"..","cache","fetch-cache",e);case"pages":return tv().join(this.serverDistDir,"pages",e);case"app":return tv().join(this.serverDistDir,"app",e);default:throw Error("Invariant: Can't determine file path kind")}}}let tb=["(..)(..)","(.)","(..)","(...)"];function t_(e){return void 0!==e.split("/").find(e=>tb.find(t=>e.startsWith(t)))}let tx=/\/\[[^/]+?\](?=\/|$)/;function tS(e){return t_(e)&&(e=function(e){let t,r,n;for(let s of e.split("/"))if(r=tb.find(e=>s.startsWith(e))){[t,n]=e.split(r,2);break}if(!t||!r||!n)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=e3(t.split("/").reduce((e,t,r,n)=>t?"("===t[0]&&t.endsWith(")")||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t:e,"")),r){case"(.)":n="/"===t?`/${n}`:t+"/"+n;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);n=t.split("/").slice(0,-1).concat(n).join("/");break;case"(...)":n="/"+n;break;case"(..)(..)":let s=t.split("/");if(s.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);n=s.slice(0,-2).concat(n).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:n}}(e).interceptedRoute),tx.test(e)}"undefined"!=typeof performance&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class tE extends Error{}function tC(e){return e.replace(/(?:\/index)?\/?$/,"")||"/"}class tR{static #e=this.timings=new Map;constructor(e){this.prerenderManifest=e}get(e){var t;let r=tR.timings.get(e);if(void 0!==r||void 0!==(r=null==(t=this.prerenderManifest.routes[e])?void 0:t.initialRevalidateSeconds))return r}set(e,t){tR.timings.set(e,t)}clear(){tR.timings.clear()}}class tA{constructor({fs:e,dev:t,appDir:r,pagesDir:n,flushToDisk:s,fetchCache:i,minimalMode:a,serverDistDir:o,requestHeaders:l,requestProtocol:u,maxMemoryCacheSize:c,getPrerenderManifest:h,fetchCacheKeyPrefix:d,CurCacheHandler:f,allowedRevalidateHeaderKeys:p,experimental:g}){var m,y,v,w;this.locks=new Map,this.unlocks=new Map;let b=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;this.hasCustomCacheHandler=!!f,f?b&&console.log("using custom cache handler",f.name):(e&&o&&(b&&console.log("using filesystem cache handler"),f=tw),tm.isAvailable({_requestHeaders:l})&&a&&i&&(b&&console.log("using fetch cache handler"),f=tm)),process.env.__NEXT_TEST_MAX_ISR_CACHE&&(c=parseInt(process.env.__NEXT_TEST_MAX_ISR_CACHE,10)),this.dev=t,this.disableForTestmode="true"===process.env.NEXT_PRIVATE_TEST_PROXY,this.minimalMode=a,this.requestHeaders=l,this.requestProtocol=u,this.allowedRevalidateHeaderKeys=p,this.prerenderManifest=h(),this.revalidateTimings=new tR(this.prerenderManifest),this.fetchCacheKeyPrefix=d;let _=[];l[e8.y3]===(null==(y=this.prerenderManifest)?void 0:null==(m=y.preview)?void 0:m.previewModeId)&&(this.isOnDemandRevalidate=!0),a&&"string"==typeof l[e8.of]&&l[e8.X_]===(null==(w=this.prerenderManifest)?void 0:null==(v=w.preview)?void 0:v.previewModeId)&&(_=l[e8.of].split(",")),f&&(this.cacheHandler=new f({dev:t,fs:e,flushToDisk:s,serverDistDir:o,revalidatedTags:_,maxMemoryCacheSize:c,_pagesDir:!!n,_appDir:!!r,_requestHeaders:l,fetchCacheKeyPrefix:d,experimental:g}))}calculateRevalidate(e,t,r){if(r)return new Date().getTime()-1e3;let n=this.revalidateTimings.get(tC(e))??1;return"number"==typeof n?1e3*n+t:n}_getPathname(e,t){return t?e:/^\/index(\/|$)/.test(e)&&!tS(e)?"/index"+e:"/"===e?"/index":e3(e)}resetRequestCache(){var e,t;null==(t=this.cacheHandler)||null==(e=t.resetRequestCache)||e.call(t)}async unlock(e){let t=this.unlocks.get(e);t&&(t(),this.locks.delete(e),this.unlocks.delete(e))}async lock(e){process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY;let t=()=>Promise.resolve(),r=this.locks.get(e);if(r)await r;else{let r=new Promise(e=>{t=async()=>{e()}});this.locks.set(e,r),this.unlocks.set(e,t)}return t}async revalidateTag(e){var t,r;return process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,null==(r=this.cacheHandler)?void 0:null==(t=r.revalidateTag)?void 0:t.call(r,e)}async fetchCacheKey(e,t={}){let r=[],n=new TextEncoder,s=new TextDecoder;if(t.body){if("function"==typeof t.body.getReader){let e=t.body,i=[];try{await e.pipeTo(new WritableStream({write(e){"string"==typeof e?(i.push(n.encode(e)),r.push(e)):(i.push(e),r.push(s.decode(e,{stream:!0})))}})),r.push(s.decode());let a=i.reduce((e,t)=>e+t.length,0),o=new Uint8Array(a),l=0;for(let e of i)o.set(e,l),l+=e.length;t._ogBody=o}catch(e){console.error("Problem reading body",e)}}else if("function"==typeof t.body.keys){let e=t.body;for(let n of(t._ogBody=t.body,new Set([...e.keys()]))){let t=e.getAll(n);r.push(`${n}=${(await Promise.all(t.map(async e=>"string"==typeof e?e:await e.text()))).join(",")}`)}}else if("function"==typeof t.body.arrayBuffer){let e=t.body,n=await e.arrayBuffer();r.push(await e.text()),t._ogBody=new Blob([n],{type:e.type})}else"string"==typeof t.body&&(r.push(t.body),t._ogBody=t.body)}let i="function"==typeof(t.headers||{}).keys?Object.fromEntries(t.headers):Object.assign({},t.headers);"traceparent"in i&&delete i.traceparent;let a=JSON.stringify(["v3",this.fetchCacheKeyPrefix||"",e,t.method,i,t.mode,t.redirect,t.credentials,t.referrer,t.referrerPolicy,t.integrity,t.cache,r]);{var o;let e=n.encode(a);return o=await crypto.subtle.digest("SHA-256",e),Array.prototype.map.call(new Uint8Array(o),e=>e.toString(16).padStart(2,"0")).join("")}}async get(e,t={}){var r,n;let s,i;if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,this.disableForTestmode||this.dev&&("fetch"!==t.kindHint||"no-cache"===this.requestHeaders["cache-control"]))return null;e=this._getPathname(e,"fetch"===t.kindHint);let a=null,o=t.revalidate,l=await (null==(r=this.cacheHandler)?void 0:r.get(e,t));if((null==l?void 0:null==(n=l.value)?void 0:n.kind)==="FETCH")return[...t.tags||[],...t.softTags||[]].some(e=>{var t;return null==(t=this.revalidatedTags)?void 0:t.includes(e)})?null:(o=o||l.value.revalidate,{isStale:(Date.now()-(l.lastModified||0))/1e3>o,value:{kind:"FETCH",data:l.value.data,revalidate:o},revalidateAfter:Date.now()+1e3*o});let u=this.revalidateTimings.get(tC(e));return(null==l?void 0:l.lastModified)===-1?(s=-1,i=-1*e8.BR):s=!!(!1!==(i=this.calculateRevalidate(e,(null==l?void 0:l.lastModified)||Date.now(),this.dev&&"fetch"!==t.kindHint))&&i<Date.now())||void 0,l&&(a={isStale:s,curRevalidate:u,revalidateAfter:i,value:l.value}),!l&&this.prerenderManifest.notFoundRoutes.includes(e)&&(a={isStale:s,value:null,curRevalidate:u,revalidateAfter:i},this.set(e,a.value,t)),a}async set(e,t,r){if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,this.disableForTestmode||this.dev&&!r.fetchCache)return;let n=JSON.stringify(t).length;if(r.fetchCache&&!this.hasCustomCacheHandler&&n>2097152){if(this.dev)throw Error(`Failed to set Next.js data cache, items over 2MB can not be cached (${n} bytes)`);return}e=this._getPathname(e,r.fetchCache);try{var s;void 0===r.revalidate||r.fetchCache||this.revalidateTimings.set(e,r.revalidate),await (null==(s=this.cacheHandler)?void 0:s.set(e,t,r))}catch(t){console.warn("Failed to update prerender cache for",e,t)}}}function tP(e){let{re:t,groups:r}=e;return e=>{let n=t.exec(e);if(!n)return!1;let s=e=>{try{return decodeURIComponent(e)}catch(e){throw new tE("failed to decode param")}},i={};return Object.keys(r).forEach(e=>{let t=r[e],a=n[t.pos];void 0!==a&&(i[e]=~a.indexOf("/")?a.split("/").map(e=>s(e)):t.repeat?[s(a)]:s(a))}),i}}let tO=/[|\\{}()[\]^$+*?.-]/,tT=/[|\\{}()[\]^$+*?.-]/g;function tk(e){return tO.test(e)?e.replace(tT,"\\$&"):e}function t$(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function tI(e){let{parameterizedRoute:t,groups:r}=function(e){let t=eM(e).slice(1).split("/"),r={},n=1;return{parameterizedRoute:t.map(e=>{let t=tb.find(t=>e.startsWith(t)),s=e.match(/\[((?:\[.*\])|.+)\]/);if(t&&s){let{key:e,optional:i,repeat:a}=t$(s[1]);return r[e]={pos:n++,repeat:a,optional:i},"/"+tk(t)+"([^/]+?)"}if(!s)return"/"+tk(e);{let{key:e,repeat:t,optional:i}=t$(s[1]);return r[e]={pos:n++,repeat:t,optional:i},t?i?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:r}}(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:r}}function tN(e){let{interceptionMarker:t,getSafeRouteKey:r,segment:n,routeKeys:s,keyPrefix:i}=e,{key:a,optional:o,repeat:l}=t$(n),u=a.replace(/\W/g,"");i&&(u=""+i+u);let c=!1;(0===u.length||u.length>30)&&(c=!0),isNaN(parseInt(u.slice(0,1)))||(c=!0),c&&(u=r()),i?s[u]=""+i+a:s[u]=a;let h=t?tk(t):"";return l?o?"(?:/"+h+"(?<"+u+">.+?))?":"/"+h+"(?<"+u+">.+?)":"/"+h+"(?<"+u+">[^/]+?)"}class tj{constructor(e){this.definition=e,tS(e.pathname)&&(this.dynamic=tP(tI(e.pathname)))}get identity(){return this.definition.pathname}get isDynamic(){return void 0!==this.dynamic}match(e){let t=this.test(e);return t?{definition:this.definition,params:t.params}:null}test(e){if(this.dynamic){let t=this.dynamic(e);return t?{params:t}:null}return e===this.definition.pathname?{}:null}}let tM=Symbol.for("__next_internal_waitUntil__"),tD=globalThis[tM]||(globalThis[tM]={waitUntilCounter:0,waitUntilResolve:void 0,waitUntilPromise:null});var tL=r(960),tU=r(548);function tq(e){let t={};return e.forEach((e,r)=>{void 0===t[r]?t[r]=e:Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]}),t}function tH(e){return e.replace(/__ESC_COLON_/gi,":")}function tF(e,t){if(!e.includes(":"))return e;for(let r of Object.keys(t))e.includes(":"+r)&&(e=e.replace(RegExp(":"+r+"\\*","g"),":"+r+"--ESCAPED_PARAM_ASTERISKS").replace(RegExp(":"+r+"\\?","g"),":"+r+"--ESCAPED_PARAM_QUESTION").replace(RegExp(":"+r+"\\+","g"),":"+r+"--ESCAPED_PARAM_PLUS").replace(RegExp(":"+r+"(?!\\w)","g"),"--ESCAPED_PARAM_COLON"+r));return e=e.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),(0,tU.MY)("/"+e,{validate:!1})(t).slice(1)}class tB{constructor(e){this.routeModule=e,this.matcher=new tj(e.definition)}static wrap(e,t={}){let r=new tB(e);return e=>ta({...e,...t,IncrementalCache:tA,handler:r.handler.bind(r)})}async handler(e,t){let{params:n}=(function({page:e,i18n:t,basePath:n,rewrites:s,pageIsDynamic:i,trailingSlash:a,caseSensitive:o}){let l,u,c;return i&&(c=(u=tP(l=function(e,t){let r=function(e,t){let r;let n=eM(e).slice(1).split("/"),s=(r=0,()=>{let e="",t=++r;for(;t>0;)e+=String.fromCharCode(97+(t-1)%26),t=Math.floor((t-1)/26);return e}),i={};return{namedParameterizedRoute:n.map(e=>{let r=tb.some(t=>e.startsWith(t)),n=e.match(/\[((?:\[.*\])|.+)\]/);if(r&&n){let[r]=e.split(n[0]);return tN({getSafeRouteKey:s,interceptionMarker:r,segment:n[1],routeKeys:i,keyPrefix:t?"nxtI":void 0})}return n?tN({getSafeRouteKey:s,segment:n[1],routeKeys:i,keyPrefix:t?"nxtP":void 0}):"/"+tk(e)}).join(""),routeKeys:i}}(e,t);return{...tI(e),namedRegex:"^"+r.namedParameterizedRoute+"(?:/)?$",routeKeys:r.routeKeys}}(e,!1)))(e)),{handleRewrites:function(l,c){let h={},d=c.pathname,f=s=>{let f=(function(e,t){let r=[],n=(0,tU.Bo)(e,r,{delimiter:"/",sensitive:"boolean"==typeof(null==t?void 0:t.sensitive)&&t.sensitive,strict:null==t?void 0:t.strict}),s=(0,tU.WS)((null==t?void 0:t.regexModifier)?new RegExp(t.regexModifier(n.source),n.flags):n,r);return(e,n)=>{if("string"!=typeof e)return!1;let i=s(e);if(!i)return!1;if(null==t?void 0:t.removeUnnamedParams)for(let e of r)"number"==typeof e.name&&delete i.params[e.name];return{...n,...i.params}}})(s.source+(a?"(/)?":""),{removeUnnamedParams:!0,strict:!0,sensitive:!!o})(c.pathname);if((s.has||s.missing)&&f){let e=function(e,t,n,s){void 0===n&&(n=[]),void 0===s&&(s=[]);let i={},a=n=>{let s;let a=n.key;switch(n.type){case"header":a=a.toLowerCase(),s=e.headers[a];break;case"cookie":if("cookies"in e)s=e.cookies[n.key];else{var o;s=(o=e.headers,function(){let{cookie:e}=o;if(!e)return{};let{parse:t}=r(337);return t(Array.isArray(e)?e.join("; "):e)})()[n.key]}break;case"query":s=t[a];break;case"host":{let{host:t}=(null==e?void 0:e.headers)||{};s=null==t?void 0:t.split(":",1)[0].toLowerCase()}}if(!n.value&&s)return i[function(e){let t="";for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);(n>64&&n<91||n>96&&n<123)&&(t+=e[r])}return t}(a)]=s,!0;if(s){let e=RegExp("^"+n.value+"$"),t=Array.isArray(s)?s.slice(-1)[0].match(e):s.match(e);if(t)return Array.isArray(t)&&(t.groups?Object.keys(t.groups).forEach(e=>{i[e]=t.groups[e]}):"host"===n.type&&t[0]&&(i.host=t[0])),!0}return!1};return!!n.every(e=>a(e))&&!s.some(e=>a(e))&&i}(l,c.query,s.has,s.missing);e?Object.assign(f,e):f=!1}if(f){let{parsedDestination:r,destQuery:a}=function(e){let t;let r=Object.assign({},e.query);delete r.__nextLocale,delete r.__nextDefaultLocale,delete r.__nextDataReq,delete r.__nextInferredLocaleFromDefault,delete r[e1.H4];let n=e.destination;for(let t of Object.keys({...e.params,...r}))n=n.replace(RegExp(":"+tk(t),"g"),"__ESC_COLON_"+t);let s=function(e){if(e.startsWith("/"))return function(e,t){let r=new URL("http://n"),n=e.startsWith(".")?new URL("http://n"):r,{pathname:s,searchParams:i,search:a,hash:o,href:l,origin:u}=new URL(e,n);if(u!==r.origin)throw Error("invariant: invalid relative URL, router received "+e);return{pathname:s,query:tq(i),search:a,hash:o,href:l.slice(r.origin.length)}}(e);let t=new URL(e);return{hash:t.hash,hostname:t.hostname,href:t.href,pathname:t.pathname,port:t.port,protocol:t.protocol,query:tq(t.searchParams),search:t.search}}(n),i=s.query,a=tH(""+s.pathname+(s.hash||"")),o=tH(s.hostname||""),l=[],u=[];(0,tU.Bo)(a,l),(0,tU.Bo)(o,u);let c=[];l.forEach(e=>c.push(e.name)),u.forEach(e=>c.push(e.name));let h=(0,tU.MY)(a,{validate:!1}),d=(0,tU.MY)(o,{validate:!1});for(let[t,r]of Object.entries(i))Array.isArray(r)?i[t]=r.map(t=>tF(tH(t),e.params)):"string"==typeof r&&(i[t]=tF(tH(r),e.params));let f=Object.keys(e.params).filter(e=>"nextInternalLocale"!==e);if(e.appendParamsToQuery&&!f.some(e=>c.includes(e)))for(let t of f)t in i||(i[t]=e.params[t]);if(t_(a))for(let t of a.split("/")){let r=tb.find(e=>t.startsWith(e));if(r){e.params["0"]=r;break}}try{let[r,n]=(t=h(e.params)).split("#",2);s.hostname=d(e.params),s.pathname=r,s.hash=(n?"#":"")+(n||""),delete s.search}catch(e){if(e.message.match(/Expected .*? to not repeat, but got an array/))throw Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match");throw e}return s.query={...r,...s.query},{newUrl:t,destQuery:i,parsedDestination:s}}({appendParamsToQuery:!0,destination:s.destination,params:f,query:c.query});if(r.protocol)return!0;if(Object.assign(h,a,f),Object.assign(c.query,r.query),delete r.query,Object.assign(c,r),d=c.pathname,n&&(d=d.replace(RegExp(`^${n}`),"")||"/"),t){let e=eH(d,t.locales);d=e.pathname,c.query.nextInternalLocale=e.detectedLocale||f.nextInternalLocale}if(d===e)return!0;if(i&&u){let e=u(d);if(e)return c.query={...c.query,...e},!0}}return!1};for(let e of s.beforeFiles||[])f(e);if(d!==e){let t=!1;for(let e of s.afterFiles||[])if(t=f(e))break;if(!t&&!(()=>{let t=eM(d||"");return t===eM(e)||(null==u?void 0:u(t))})()){for(let e of s.fallback||[])if(t=f(e))break}}return h},defaultRouteRegex:l,dynamicRouteMatcher:u,defaultRouteMatches:c,getParamsFromRouteMatches:function(e,r,n){return tP(function(){let{groups:e,routeKeys:s}=l;return{re:{exec:i=>{let a=Object.fromEntries(new URLSearchParams(i)),o=t&&n&&a["1"]===n;for(let e of Object.keys(a)){let t=a[e];e!==e8.dN&&e.startsWith(e8.dN)&&(a[e.substring(e8.dN.length)]=t,delete a[e])}let l=Object.keys(s||{}),u=e=>{if(t){let s=Array.isArray(e),i=s?e[0]:e;if("string"==typeof i&&t.locales.some(e=>e.toLowerCase()===i.toLowerCase()&&(n=e,r.locale=n,!0)))return s&&e.splice(0,1),!s||0===e.length}return!1};return l.every(e=>a[e])?l.reduce((t,r)=>{let n=null==s?void 0:s[r];return n&&!u(a[r])&&(t[e[n].pos]=a[r]),t},{}):Object.keys(a).reduce((e,t)=>{if(!u(a[t])){let r=t;return o&&(r=parseInt(t,10)-1+""),Object.assign(e,{[r]:a[t]})}return e},{})}},groups:e}}())(e.headers["x-now-route-matches"])},normalizeDynamicRouteParams:(e,t)=>{var r,n,s;let i;return r=e,n=l,s=c,i=!0,n?{params:r=Object.keys(n.groups).reduce((e,a)=>{let o=r[a];"string"==typeof o&&(o=e6(o)),Array.isArray(o)&&(o=o.map(e=>("string"==typeof e&&(e=e6(e)),e)));let l=s[a],u=n.groups[a].optional;return((Array.isArray(l)?l.some(e=>Array.isArray(o)?o.some(t=>t.includes(e)):null==o?void 0:o.includes(e)):null==o?void 0:o.includes(l))||void 0===o&&!(u&&t))&&(i=!1),u&&(!o||Array.isArray(o)&&1===o.length&&("index"===o[0]||o[0]===`[[...${a}]]`))&&(o=void 0,delete r[a]),o&&"string"==typeof o&&n.groups[a].repeat&&(o=o.split("/")),o&&(e[a]=o),e},{}),hasValidParams:i}:{params:r,hasValidParams:!1}},normalizeVercelUrl:(e,t,r)=>(function(e,t,r,n,s){if(n&&t&&s){let t=(0,tL.parse)(e.url,!0);for(let e of(delete t.search,Object.keys(t.query)))(e!==e8.dN&&e.startsWith(e8.dN)||(r||Object.keys(s.groups)).includes(e))&&delete t.query[e];e.url=(0,tL.format)(t)}})(e,t,r,i,l),interpolateDynamicPath:(e,t)=>(function(e,t,r){if(!r)return e;for(let n of Object.keys(r.groups)){let{optional:s,repeat:i}=r.groups[n],a=`[${i?"...":""}${n}]`;s&&(a=`[${a}]`);let o=e.indexOf(a);if(o>-1){let r;let s=t[n];r=Array.isArray(s)?s.map(e=>e&&encodeURIComponent(e)).join("/"):s?encodeURIComponent(s):"",e=e.slice(0,o)+r+e.slice(o+a.length)}}return e})(e,t,l)}})({pageIsDynamic:this.matcher.isDynamic,page:this.matcher.definition.pathname,basePath:e.nextUrl.basePath,rewrites:{},caseSensitive:!1}).normalizeDynamicRouteParams(tq(e.nextUrl.searchParams)),s={params:n,prerenderManifest:{version:4,routes:{},dynamicRoutes:{},preview:tt(),notFoundRoutes:[]},renderOpts:{supportsDynamicResponse:!0,experimental:{ppr:!1}}},i=await this.routeModule.handle(e,s),a=[tD.waitUntilPromise];return s.renderOpts.waitUntil&&a.push(s.renderOpts.waitUntil),t.waitUntil(Promise.all(a)),i}}var tW=r(561);!function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(m||(m={}));var tJ=r(861);let tV="4.67.1",tX=!1;class tG{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}o||function(e,t={auto:!1}){if(tX)throw Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(o)throw Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${o}'\``);tX=t.auto,o=e.kind,l=e.fetch,e.Request,e.Response,e.Headers,u=e.FormData,e.Blob,c=e.File,h=e.ReadableStream,d=e.getMultipartRequestOptions,f=e.getDefaultAgent,p=e.fileFromPath,g=e.isFsReadStream}(function({manuallyImported:e}={}){let t,r,n,s;let i=e?"You may need to use polyfills":`Add one of these imports before your first \`import … from 'openai'\`:
- \`import 'openai/shims/node'\` (if you're running on Node)
- \`import 'openai/shims/web'\` (otherwise)
`;try{t=fetch,r=Request,n=Response,s=Headers}catch(e){throw Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${i}`)}return{kind:"web",fetch:t,Request:r,Response:n,Headers:s,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${i}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${i}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${i}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${i}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new tG(e)}),getDefaultAgent:e=>void 0,fileFromPath:()=>{throw Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0});var tz=r(195).Buffer;class tK{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;return new tK(async function*(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(let r of tY(e,t))if(!n){if(r.data.startsWith("[DONE]")){n=!0;continue}if(null===r.event){let e;try{e=JSON.parse(r.data)}catch(e){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),e}if(e&&e.error)throw new rU(void 0,e.error,void 0,void 0);yield e}else{let e;try{e=JSON.parse(r.data)}catch(e){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),e}if("error"==r.event)throw new rU(void 0,e.error,e.message,void 0);yield{event:r.event,data:e}}}n=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{n||t.abort()}},t)}static fromReadableStream(e,t){let r=!1;async function*n(){let t=new t0;for await(let r of t1(e))for(let e of t.decode(r))yield e;for(let e of t.flush())yield e}return new tK(async function*(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let t of n())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{e||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],r=this.iterator(),n=n=>({next:()=>{if(0===n.length){let n=r.next();e.push(n),t.push(n)}return n.shift()}});return[new tK(()=>n(e),this.controller),new tK(()=>n(t),this.controller)]}toReadableStream(){let e;let t=this,r=new TextEncoder;return new h({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:n,done:s}=await e.next();if(s)return t.close();let i=r.encode(JSON.stringify(n)+"\n");t.enqueue(i)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}async function*tY(e,t){if(!e.body)throw t.abort(),new rL("Attempted to iterate over a response with no body");let r=new tZ,n=new t0;for await(let t of tQ(t1(e.body)))for(let e of n.decode(t)){let t=r.decode(e);t&&(yield t)}for(let e of n.flush()){let t=r.decode(e);t&&(yield t)}}async function*tQ(e){let t=new Uint8Array;for await(let r of e){let e;if(null==r)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?new TextEncoder().encode(r):r,s=new Uint8Array(t.length+n.length);for(s.set(t),s.set(n,t.length),t=s;-1!==(e=function(e){for(let t=0;t<e.length-2;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(t));)yield t.slice(0,e),t=t.slice(e)}t.length>0&&(yield t)}class tZ{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=function(e,t){let r=e.indexOf(":");return -1!==r?[e.substring(0,r),":",e.substring(r+t.length)]:[e,"",""]}(e,":");return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}class t0{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];let r=t0.NEWLINE_CHARS.has(t[t.length-1]||""),n=t.split(t0.NEWLINE_REGEXP);return(r&&n.pop(),1!==n.length||r)?(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),r||(this.buffer=[n.pop()||""]),n):(this.buffer.push(n[0]),[])}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if(void 0!==tz){if(e instanceof tz)return e.toString();if(e instanceof Uint8Array)return tz.from(e).toString();throw new rL(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new rL(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new rL("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];let e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}function t1(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}t0.NEWLINE_CHARS=new Set(["\n","\r"]),t0.NEWLINE_REGEXP=/\r\n|[\n\r]/g;var t2=r(195).Buffer;let t4=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,t3=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&t6(e),t6=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,t8=e=>t3(e)||t4(e)||g(e);async function t9(e,t,r){var n;if(t3(e=await e))return e;if(t4(e)){let n=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");let s=t6(n)?[await n.arrayBuffer()]:[n];return new c(s,t,r)}let s=await t5(e);if(t||(t=(t7((n=e).name)||t7(n.filename)||t7(n.path)?.split(/[\\/]/).pop())??"unknown_file"),!r?.type){let e=s[0]?.type;"string"==typeof e&&(r={...r,type:e})}return new c(s,t,r)}async function t5(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(t6(e))t.push(await e.arrayBuffer());else if(re(e))for await(let r of e)t.push(r);else throw Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){let t=Object.getOwnPropertyNames(e);return`[${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`);return t}let t7=e=>"string"==typeof e?e:void 0!==t2&&e instanceof t2?String(e):void 0,re=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],rt=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],rr=async e=>{let t=await rn(e.body);return d(t,e)},rn=async e=>{let t=new u;return await Promise.all(Object.entries(e||{}).map(([e,r])=>ri(t,e,r))),t},rs=e=>{if(t8(e))return!0;if(Array.isArray(e))return e.some(rs);if(e&&"object"==typeof e){for(let t in e)if(rs(e[t]))return!0}return!1},ri=async(e,t,r)=>{if(void 0!==r){if(null==r)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if(t8(r)){let n=await t9(r);e.append(t,n)}else if(Array.isArray(r))await Promise.all(r.map(r=>ri(e,t+"[]",r)));else if("object"==typeof r)await Promise.all(Object.entries(r).map(([r,n])=>ri(e,`${t}[${r}]`,n)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var ra=r(195).Buffer,ro=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},rl=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};async function ru(e){let{response:t}=e;if(e.options.stream)return(r$("response",t.status,t.url,t.headers,t.body),e.options.__streamClass)?e.options.__streamClass.fromSSEResponse(t,e.controller):tK.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;let r=t.headers.get("content-type");if(r?.includes("application/json")||r?.includes("application/vnd.api+json")){let e=await t.json();return r$("response",t.status,t.url,t.headers,e),rc(e,t)}let n=await t.text();return r$("response",t.status,t.url,t.headers,n),n}function rc(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class rh extends Promise{constructor(e,t=ru){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new rh(this.responsePromise,async t=>rc(e(await this.parseResponse(t)),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class rd{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:n,fetch:s}){this.baseURL=e,this.maxRetries=rR("maxRetries",t),this.timeout=rR("timeout",r),this.httpAgent=n,this.fetch=s??l}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...r_(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${rI()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async r=>{let n=r&&t6(r?.body)?new DataView(await r.body.arrayBuffer()):r?.body instanceof DataView?r.body:r?.body instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r?.body)?new DataView(r.body.buffer):r?.body;return{method:e,path:t,...r,body:n}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if("string"==typeof e){if(void 0!==ra)return ra.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){let{method:r,path:n,query:s,headers:i={}}=e,a=ArrayBuffer.isView(e.body)||e.__binaryRequest&&"string"==typeof e.body?e.body:rt(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,o=this.calculateContentLength(a),l=this.buildURL(n,s);"timeout"in e&&rR("timeout",e.timeout);let u=e.timeout??this.timeout,c=e.httpAgent??this.httpAgent??f(l),h=u+1e3;"number"==typeof c?.options?.timeout&&h>(c.options.timeout??0)&&(c.options.timeout=h),this.idempotencyHeader&&"get"!==r&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);let d=this.buildHeaders({options:e,headers:i,contentLength:o,retryCount:t});return{req:{method:r,...a&&{body:a},headers:d,...c&&{agent:c},signal:e.signal??null},url:l,timeout:u}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:n}){let s={};return r&&(s["content-length"]=r),rk(s,this.defaultHeaders(e)),rk(s,t),rt(e.body)&&"node"!==o&&delete s["content-type"],void 0===rM(t,"x-stainless-retry-count")&&(s["x-stainless-retry-count"]=String(n)),this.validateHeaders(s,t),s}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,r,n){return rU.generate(e,t,r,n)}request(e,t=null){return new rh(this.makeRequest(e,t))}async makeRequest(e,t){let r=await e,n=r.maxRetries??this.maxRetries;null==t&&(t=n),await this.prepareOptions(r);let{req:s,url:i,timeout:a}=this.buildRequest(r,{retryCount:n-t});if(await this.prepareRequest(s,{url:i,options:r}),r$("request",i,r,s.headers),r.signal?.aborted)throw new rq;let o=new AbortController,l=await this.fetchWithTimeout(i,s,a,o).catch(rA);if(l instanceof Error){if(r.signal?.aborted)throw new rq;if(t)return this.retryRequest(r,t);if("AbortError"===l.name)throw new rF;throw new rH({cause:l})}let u=rg(l.headers);if(!l.ok){if(t&&this.shouldRetry(l)){let e=`retrying, ${t} attempts remaining`;return r$(`response (error; ${e})`,l.status,i,u),this.retryRequest(r,t,u)}let e=await l.text().catch(e=>rA(e).message),n=rx(e),s=n?void 0:e,a=t?"(error; no more retries left)":"(error; not retryable)";throw r$(`response (error; ${a})`,l.status,i,u,s),this.makeStatusError(l.status,n,s,u)}return{response:l,options:r,controller:o}}requestAPIList(e,t){return new rp(this,this.makeRequest(t,null),e)}buildURL(e,t){let r=new URL(rE(e)?e:this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return rO(n)||(t={...n,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new rL(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,n){let{signal:s,...i}=t||{};s&&s.addEventListener("abort",()=>n.abort());let a=setTimeout(()=>n.abort(),r);return this.getRequestClient().fetch.call(void 0,e,{signal:n.signal,...i}).finally(()=>{clearTimeout(a)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,r){let n;let s=r?.["retry-after-ms"];if(s){let e=parseFloat(s);Number.isNaN(e)||(n=e)}let i=r?.["retry-after"];if(i&&!n){let e=parseFloat(i);n=Number.isNaN(e)?Date.parse(i)-Date.now():1e3*e}if(!(n&&0<=n&&n<6e4)){let r=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,r)}return await rC(n),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${tV}`}}class rf{constructor(e,t,r,n){y.set(this,void 0),ro(this,y,e,"f"),this.options=n,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){let e=this.nextPageInfo();if(!e)throw new rL("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){for(let[r,n]of[...Object.entries(t.query||{}),...e.url.searchParams.entries()])e.url.searchParams.set(r,n);t.query=void 0,t.path=e.url.toString()}return await rl(this,y,"f").requestAPIList(this.constructor,t)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(y=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class rp extends rh{constructor(e,t,r){super(t,async t=>new r(e,t.response,await ru(t),t.options))}async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}}let rg=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){let r=t.toString();return e[r.toLowerCase()]||e[r]}}),rm={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},ry=e=>"object"==typeof e&&null!==e&&!rO(e)&&Object.keys(e).every(e=>rT(rm,e)),rv=()=>"undefined"!=typeof Deno&&null!=Deno.build?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tV,"X-Stainless-OS":rb(Deno.build.os),"X-Stainless-Arch":rw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tV,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"other:edge-runtime","X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version},rw=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",rb=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown",r_=()=>a??(a=rv()),rx=e=>{try{return JSON.parse(e)}catch(e){return}},rS=RegExp("^(?:[a-z]+:)?//","i"),rE=e=>rS.test(e),rC=e=>new Promise(t=>setTimeout(t,e)),rR=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new rL(`${e} must be an integer`);if(t<0)throw new rL(`${e} must be a positive integer`);return t},rA=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return Error(JSON.stringify(e))}catch{}return Error(e)},rP=e=>"undefined"!=typeof process?process.env?.[e]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function rO(e){if(!e)return!0;for(let t in e)return!1;return!0}function rT(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rk(e,t){for(let r in t){if(!rT(t,r))continue;let n=r.toLowerCase();if(!n)continue;let s=t[r];null===s?delete e[n]:void 0!==s&&(e[n]=s)}}function r$(e,...t){"undefined"!=typeof process&&process?.env?.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}let rI=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),rN=()=>"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator,rj=e=>"function"==typeof e?.get,rM=(e,t)=>{let r=t.toLowerCase();if(rj(e)){let n=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(e,t,r)=>t+r.toUpperCase());for(let s of[t,r,t.toUpperCase(),n]){let t=e.get(s);if(t)return t}}for(let[n,s]of Object.entries(e))if(n.toLowerCase()===r){if(Array.isArray(s)){if(s.length<=1)return s[0];return console.warn(`Received ${s.length} entries for the ${t} header, using the first entry.`),s[0]}return s}};function rD(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}class rL extends Error{}class rU extends rL{constructor(e,t,r,n){super(`${rU.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.request_id=n?.["x-request-id"],this.error=t,this.code=t?.code,this.param=t?.param,this.type=t?.type}static makeMessage(e,t,r){let n=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,n){if(!e)return new rH({message:r,cause:rA(t)});let s=t?.error;return 400===e?new rB(e,s,r,n):401===e?new rW(e,s,r,n):403===e?new rJ(e,s,r,n):404===e?new rV(e,s,r,n):409===e?new rX(e,s,r,n):422===e?new rG(e,s,r,n):429===e?new rz(e,s,r,n):e>=500?new rK(e,s,r,n):new rU(e,s,r,n)}}class rq extends rU{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class rH extends rU{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class rF extends rH{constructor({message:e}={}){super({message:e??"Request timed out."})}}class rB extends rU{constructor(){super(...arguments),this.status=400}}class rW extends rU{constructor(){super(...arguments),this.status=401}}class rJ extends rU{constructor(){super(...arguments),this.status=403}}class rV extends rU{constructor(){super(...arguments),this.status=404}}class rX extends rU{constructor(){super(...arguments),this.status=409}}class rG extends rU{constructor(){super(...arguments),this.status=422}}class rz extends rU{constructor(){super(...arguments),this.status=429}}class rK extends rU{}class rY extends rL{constructor(){super("Could not parse response content as the length limit was reached")}}class rQ extends rL{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}let rZ="RFC3986",r0={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},r1=(Object.prototype.hasOwnProperty,Array.isArray),r2=(()=>{let e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})();function r4(e,t){if(r1(e)){let r=[];for(let n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)}let r3=Object.prototype.hasOwnProperty,r6={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},r8=Array.isArray,r9=Array.prototype.push,r5=function(e,t){r9.apply(e,r8(t)?t:[t])},r7=Date.prototype.toISOString,ne={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,r,n,s)=>{if(0===e.length)return e;let i=e;if("symbol"==typeof e?i=Symbol.prototype.toString.call(e):"string"!=typeof e&&(i=String(e)),"iso-8859-1"===r)return escape(i).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let a="";for(let e=0;e<i.length;e+=1024){let t=i.length>=1024?i.slice(e,e+1024):i,r=[];for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||"RFC1738"===s&&(40===n||41===n)){r[r.length]=t.charAt(e);continue}if(n<128){r[r.length]=r2[n];continue}if(n<2048){r[r.length]=r2[192|n>>6]+r2[128|63&n];continue}if(n<55296||n>=57344){r[r.length]=r2[224|n>>12]+r2[128|n>>6&63]+r2[128|63&n];continue}e+=1,n=65536+((1023&n)<<10|1023&t.charCodeAt(e)),r[r.length]=r2[240|n>>18]+r2[128|n>>12&63]+r2[128|n>>6&63]+r2[128|63&n]}a+=r.join("")}return a},encodeValuesOnly:!1,format:rZ,formatter:r0[rZ],indices:!1,serializeDate:e=>r7.call(e),skipNulls:!1,strictNullHandling:!1},nt={};class nr extends rf{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class nn extends rf{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){let e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;let t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){let e=this.getPaginatedItems();if(!e.length)return null;let t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class ns{constructor(e){this._client=e}}class ni extends ns{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}ni||(ni={});class na extends ns{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}}na||(na={});class no extends ns{constructor(){super(...arguments),this.completions=new na(this._client)}}(no||(no={})).Completions=na;class nl extends ns{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}nl||(nl={});class nu extends ns{create(e,t){return this._client.post("/files",rr({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return ry(e)?this.list({},e):this._client.getAPIList("/files",nc,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t?.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=18e5}={}){let n=new Set(["processed","error","deleted"]),s=Date.now(),i=await this.retrieve(e);for(;!i.status||!n.has(i.status);)if(await rC(t),i=await this.retrieve(e),Date.now()-s>r)throw new rF({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return i}}class nc extends nr{}(nu||(nu={})).FileObjectsPage=nc;class nh extends ns{createVariation(e,t){return this._client.post("/images/variations",rr({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",rr({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}nh||(nh={});class nd extends ns{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}nd||(nd={});class nf extends ns{create(e,t){return this._client.post("/audio/transcriptions",rr({body:e,...t}))}}nf||(nf={});class np extends ns{create(e,t){return this._client.post("/audio/translations",rr({body:e,...t}))}}np||(np={});class ng extends ns{constructor(){super(...arguments),this.transcriptions=new nf(this._client),this.translations=new np(this._client),this.speech=new nd(this._client)}}!function(e){e.Transcriptions=nf,e.Translations=np,e.Speech=nd}(ng||(ng={}));class nm extends ns{create(e,t){return this._client.post("/moderations",{body:e,...t})}}nm||(nm={});class ny extends ns{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",nv,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class nv extends nr{}(ny||(ny={})).ModelsPage=nv;class nw extends ns{list(e,t={},r){return ry(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,nb,{query:t,...r})}}class nb extends nn{}(nw||(nw={})).FineTuningJobCheckpointsPage=nb;class n_ extends ns{constructor(){super(...arguments),this.checkpoints=new nw(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return ry(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",nx,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return ry(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,nS,{query:t,...r})}}class nx extends nn{}class nS extends nn{}!function(e){e.FineTuningJobsPage=nx,e.FineTuningJobEventsPage=nS,e.Checkpoints=nw,e.FineTuningJobCheckpointsPage=nb}(n_||(n_={}));class nE extends ns{constructor(){super(...arguments),this.jobs=new n_(this._client)}}!function(e){e.Jobs=n_,e.FineTuningJobsPage=nx,e.FineTuningJobEventsPage=nS}(nE||(nE={}));class nC extends ns{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},t){return ry(e)?this.list({},e):this._client.getAPIList("/assistants",nR,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class nR extends nn{}function nA(e){return"function"==typeof e.parse}(nC||(nC={})).AssistantsPage=nR;let nP=e=>e?.role==="assistant",nO=e=>e?.role==="function",nT=e=>e?.role==="tool";var nk=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},n$=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class nI{constructor(){v.add(this),this.controller=new AbortController,w.set(this,void 0),b.set(this,()=>{}),_.set(this,()=>{}),x.set(this,void 0),S.set(this,()=>{}),E.set(this,()=>{}),C.set(this,{}),R.set(this,!1),A.set(this,!1),P.set(this,!1),O.set(this,!1),nk(this,w,new Promise((e,t)=>{nk(this,b,e,"f"),nk(this,_,t,"f")}),"f"),nk(this,x,new Promise((e,t)=>{nk(this,S,e,"f"),nk(this,E,t,"f")}),"f"),n$(this,w,"f").catch(()=>{}),n$(this,x,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},n$(this,v,"m",T).bind(this))},0)}_connected(){this.ended||(n$(this,b,"f").call(this),this._emit("connect"))}get ended(){return n$(this,R,"f")}get errored(){return n$(this,A,"f")}get aborted(){return n$(this,P,"f")}abort(){this.controller.abort()}on(e,t){return(n$(this,C,"f")[e]||(n$(this,C,"f")[e]=[])).push({listener:t}),this}off(e,t){let r=n$(this,C,"f")[e];if(!r)return this;let n=r.findIndex(e=>e.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){return(n$(this,C,"f")[e]||(n$(this,C,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{nk(this,O,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){nk(this,O,!0,"f"),await n$(this,x,"f")}_emit(e,...t){if(n$(this,R,"f"))return;"end"===e&&(nk(this,R,!0,"f"),n$(this,S,"f").call(this));let r=n$(this,C,"f")[e];if(r&&(n$(this,C,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];n$(this,O,"f")||r?.length||Promise.reject(e),n$(this,_,"f").call(this,e),n$(this,E,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];n$(this,O,"f")||r?.length||Promise.reject(e),n$(this,_,"f").call(this,e),n$(this,E,"f").call(this,e),this._emit("end")}}_emitFinal(){}}function nN(e){return e?.$brand==="auto-parseable-response-format"}function nj(e){return e?.$brand==="auto-parseable-tool"}function nM(e,t){let r=e.choices.map(e=>{var r;if("length"===e.finish_reason)throw new rY;if("content_filter"===e.finish_reason)throw new rQ;return{...e,message:{...e.message,tool_calls:e.message.tool_calls?.map(e=>(function(e,t){let r=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:nj(r)?r.$parseRaw(t.function.arguments):r?.function.strict?JSON.parse(t.function.arguments):null}}})(t,e))??[],parsed:e.message.content&&!e.message.refusal?(r=e.message.content,t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(r):JSON.parse(r):null):null}}});return{...e,choices:r}}function nD(e){return!!nN(e.response_format)||(e.tools?.some(e=>nj(e)||"function"===e.type&&!0===e.function.strict)??!1)}w=new WeakMap,b=new WeakMap,_=new WeakMap,x=new WeakMap,S=new WeakMap,E=new WeakMap,C=new WeakMap,R=new WeakMap,A=new WeakMap,P=new WeakMap,O=new WeakMap,v=new WeakSet,T=function(e){if(nk(this,A,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new rq),e instanceof rq)return nk(this,P,!0,"f"),this._emit("abort",e);if(e instanceof rL)return this._emit("error",e);if(e instanceof Error){let t=new rL(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new rL(String(e)))};var nL=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class nU extends nI{constructor(){super(...arguments),k.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);let t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(nO(e)||nT(e))&&e.content)this._emit("functionCallResult",e.content);else if(nP(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(nP(e)&&e.tool_calls)for(let t of e.tool_calls)"function"===t.type&&this._emit("functionCall",t.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new rL("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),nL(this,k,"m",$).call(this)}async finalMessage(){return await this.done(),nL(this,k,"m",I).call(this)}async finalFunctionCall(){return await this.done(),nL(this,k,"m",N).call(this)}async finalFunctionCallResult(){return await this.done(),nL(this,k,"m",j).call(this)}async totalUsage(){return await this.done(),nL(this,k,"m",M).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let t=nL(this,k,"m",I).call(this);t&&this._emit("finalMessage",t);let r=nL(this,k,"m",$).call(this);r&&this._emit("finalContent",r);let n=nL(this,k,"m",N).call(this);n&&this._emit("finalFunctionCall",n);let s=nL(this,k,"m",j).call(this);null!=s&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",nL(this,k,"m",M).call(this))}async _createChatCompletion(e,t,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),nL(this,k,"m",D).call(this,t);let s=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(nM(s,t))}async _runChatCompletion(e,t,r){for(let e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){let n="function",{function_call:s="auto",stream:i,...a}=t,o="string"!=typeof s&&s?.name,{maxChatCompletions:l=10}=r||{},u={};for(let e of t.functions)u[e.name||e.function.name]=e;let c=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){let t;let i=await this._createChatCompletion(e,{...a,function_call:s,functions:c,messages:[...this.messages]},r),l=i.choices[0]?.message;if(!l)throw new rL("missing message in ChatCompletion response");if(!l.function_call)return;let{name:h,arguments:d}=l.function_call,f=u[h];if(f){if(o&&o!==h){let e=`Invalid function_call: ${JSON.stringify(h)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:n,name:h,content:e});continue}}else{let e=`Invalid function_call: ${JSON.stringify(h)}. Available options are: ${c.map(e=>JSON.stringify(e.name)).join(", ")}. Please try again`;this._addMessage({role:n,name:h,content:e});continue}try{t=nA(f)?await f.parse(d):d}catch(e){this._addMessage({role:n,name:h,content:e instanceof Error?e.message:String(e)});continue}let p=await f.function(t,this),g=nL(this,k,"m",L).call(this,p);if(this._addMessage({role:n,name:h,content:g}),o)return}}async _runTools(e,t,r){let n="tool",{tool_choice:s="auto",stream:i,...a}=t,o="string"!=typeof s&&s?.function?.name,{maxChatCompletions:l=10}=r||{},u=t.tools.map(e=>{if(nj(e)){if(!e.$callback)throw new rL("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),c={};for(let e of u)"function"===e.type&&(c[e.function.name||e.function.function.name]=e.function);let h="tools"in t?u.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){let t=await this._createChatCompletion(e,{...a,tool_choice:s,tools:h,messages:[...this.messages]},r),i=t.choices[0]?.message;if(!i)throw new rL("missing message in ChatCompletion response");if(!i.tool_calls?.length)break;for(let e of i.tool_calls){let t;if("function"!==e.type)continue;let r=e.id,{name:s,arguments:i}=e.function,a=c[s];if(a){if(o&&o!==s){let e=`Invalid tool_call: ${JSON.stringify(s)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:n,tool_call_id:r,content:e});continue}}else{let e=`Invalid tool_call: ${JSON.stringify(s)}. Available options are: ${Object.keys(c).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:r,content:e});continue}try{t=nA(a)?await a.parse(i):i}catch(t){let e=t instanceof Error?t.message:String(t);this._addMessage({role:n,tool_call_id:r,content:e});continue}let l=await a.function(t,this),u=nL(this,k,"m",L).call(this,l);if(this._addMessage({role:n,tool_call_id:r,content:u}),o)return}}}}k=new WeakSet,$=function(){return nL(this,k,"m",I).call(this).content??null},I=function(){let e=this.messages.length;for(;e-- >0;){let t=this.messages[e];if(nP(t)){let{function_call:e,...r}=t,n={...r,content:t.content??null,refusal:t.refusal??null};return e&&(n.function_call=e),n}}throw new rL("stream ended without producing a ChatCompletionMessage with role=assistant")},N=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(nP(t)&&t?.function_call)return t.function_call;if(nP(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},j=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(nO(t)&&null!=t.content||nT(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},M=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},D=function(e){if(null!=e.n&&e.n>1)throw new rL("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},L=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class nq extends nU{static runFunctions(e,t,r){let n=new nq,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,s)),n}static runTools(e,t,r){let n=new nq,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,s)),n}_addMessage(e,t=!0){super._addMessage(e,t),nP(e)&&e.content&&this._emit("content",e.content)}}let nH={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,ALL:511};class nF extends Error{}class nB extends Error{}let nW=(e,t)=>{let r=e.length,n=0,s=e=>{throw new nF(`${e} at position ${n}`)},i=e=>{throw new nB(`${e} at position ${n}`)},a=()=>(h(),n>=r&&s("Unexpected end of input"),'"'===e[n])?o():"{"===e[n]?l():"["===e[n]?u():"null"===e.substring(n,n+4)||nH.NULL&t&&r-n<4&&"null".startsWith(e.substring(n))?(n+=4,null):"true"===e.substring(n,n+4)||nH.BOOL&t&&r-n<4&&"true".startsWith(e.substring(n))?(n+=4,!0):"false"===e.substring(n,n+5)||nH.BOOL&t&&r-n<5&&"false".startsWith(e.substring(n))?(n+=5,!1):"Infinity"===e.substring(n,n+8)||nH.INFINITY&t&&r-n<8&&"Infinity".startsWith(e.substring(n))?(n+=8,1/0):"-Infinity"===e.substring(n,n+9)||nH.MINUS_INFINITY&t&&1<r-n&&r-n<9&&"-Infinity".startsWith(e.substring(n))?(n+=9,-1/0):"NaN"===e.substring(n,n+3)||nH.NAN&t&&r-n<3&&"NaN".startsWith(e.substring(n))?(n+=3,NaN):c(),o=()=>{let a=n,o=!1;for(n++;n<r&&('"'!==e[n]||o&&"\\"===e[n-1]);)o="\\"===e[n]&&!o,n++;if('"'==e.charAt(n))try{return JSON.parse(e.substring(a,++n-Number(o)))}catch(e){i(String(e))}else if(nH.STR&t)try{return JSON.parse(e.substring(a,n-Number(o))+'"')}catch(t){return JSON.parse(e.substring(a,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{n++,h();let i={};try{for(;"}"!==e[n];){if(h(),n>=r&&nH.OBJ&t)return i;let s=o();h(),n++;try{let e=a();Object.defineProperty(i,s,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(nH.OBJ&t)return i;throw e}h(),","===e[n]&&n++}}catch(e){if(nH.OBJ&t)return i;s("Expected '}' at end of object")}return n++,i},u=()=>{n++;let r=[];try{for(;"]"!==e[n];)r.push(a()),h(),","===e[n]&&n++}catch(e){if(nH.ARR&t)return r;s("Expected ']' at end of array")}return n++,r},c=()=>{if(0===n){"-"===e&&nH.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(r){if(nH.NUM&t)try{if("."===e[e.length-1])return JSON.parse(e.substring(0,e.lastIndexOf(".")));return JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}i(String(r))}}let a=n;for("-"===e[n]&&n++;e[n]&&!",]}".includes(e[n]);)n++;n!=r||nH.NUM&t||s("Unterminated number literal");try{return JSON.parse(e.substring(a,n))}catch(r){"-"===e.substring(a,n)&&nH.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(a,e.lastIndexOf("e")))}catch(e){i(String(e))}}},h=()=>{for(;n<r&&" \n\r	".includes(e[n]);)n++};return a()},nJ=e=>(function(e,t=nH.ALL){if("string"!=typeof e)throw TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw Error(`${e} is empty`);return nW(e.trim(),t)})(e,nH.ALL^nH.NUM);var nV=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},nX=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class nG extends nU{constructor(e){super(),U.add(this),q.set(this,void 0),H.set(this,void 0),F.set(this,void 0),nV(this,q,e,"f"),nV(this,H,[],"f")}get currentChatCompletionSnapshot(){return nX(this,F,"f")}static fromReadableStream(e){let t=new nG(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){let n=new nG(t);return n._run(()=>n._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,t,r){super._createChatCompletion;let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),nX(this,U,"m",B).call(this);let s=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});for await(let e of(this._connected(),s))nX(this,U,"m",J).call(this,e);if(s.controller.signal?.aborted)throw new rq;return this._addChatCompletion(nX(this,U,"m",G).call(this))}async _fromReadableStream(e,t){let r;let n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),nX(this,U,"m",B).call(this),this._connected();let s=tK.fromReadableStream(e,this.controller);for await(let e of s)r&&r!==e.id&&this._addChatCompletion(nX(this,U,"m",G).call(this)),nX(this,U,"m",J).call(this,e),r=e.id;if(s.controller.signal?.aborted)throw new rq;return this._addChatCompletion(nX(this,U,"m",G).call(this))}[(q=new WeakMap,H=new WeakMap,F=new WeakMap,U=new WeakSet,B=function(){this.ended||nV(this,F,void 0,"f")},W=function(e){let t=nX(this,H,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},nX(this,H,"f")[e.index]=t),t},J=function(e){if(this.ended)return;let t=nX(this,U,"m",K).call(this,e);for(let r of(this._emit("chunk",e,t),e.choices)){let e=t.choices[r.index];null!=r.delta.content&&e.message?.role==="assistant"&&e.message?.content&&(this._emit("content",r.delta.content,e.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=r.delta.refusal&&e.message?.role==="assistant"&&e.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:e.message.refusal}),r.logprobs?.content!=null&&e.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:e.logprobs?.content??[]}),r.logprobs?.refusal!=null&&e.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});let n=nX(this,U,"m",W).call(this,e);for(let t of(e.finish_reason&&(nX(this,U,"m",X).call(this,e),null!=n.current_tool_call_index&&nX(this,U,"m",V).call(this,e,n.current_tool_call_index)),r.delta.tool_calls??[]))n.current_tool_call_index!==t.index&&(nX(this,U,"m",X).call(this,e),null!=n.current_tool_call_index&&nX(this,U,"m",V).call(this,e,n.current_tool_call_index)),n.current_tool_call_index=t.index;for(let t of r.delta.tool_calls??[]){let r=e.message.tool_calls?.[t.index];r?.type&&(r?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:r.function?.name,index:t.index,arguments:r.function.arguments,parsed_arguments:r.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):r?.type)}}},V=function(e,t){if(nX(this,U,"m",W).call(this,e).done_tool_calls.has(t))return;let r=e.message.tool_calls?.[t];if(!r)throw Error("no tool call snapshot");if(!r.type)throw Error("tool call snapshot missing `type`");if("function"===r.type){let e=nX(this,q,"f")?.tools?.find(e=>"function"===e.type&&e.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:t,arguments:r.function.arguments,parsed_arguments:nj(e)?e.$parseRaw(r.function.arguments):e?.function.strict?JSON.parse(r.function.arguments):null})}else r.type},X=function(e){let t=nX(this,U,"m",W).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;let r=nX(this,U,"m",z).call(this);this._emit("content.done",{content:e.message.content,parsed:r?r.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},G=function(){if(this.ended)throw new rL("stream has ended, this shouldn't happen");let e=nX(this,F,"f");if(!e)throw new rL("request ended without sending any chunks");return nV(this,F,void 0,"f"),nV(this,H,[],"f"),function(e,t){var r;let{id:n,choices:s,created:i,model:a,system_fingerprint:o,...l}=e;return r={...l,id:n,choices:s.map(({message:t,finish_reason:r,index:n,logprobs:s,...i})=>{if(!r)throw new rL(`missing finish_reason for choice ${n}`);let{content:a=null,function_call:o,tool_calls:l,...u}=t,c=t.role;if(!c)throw new rL(`missing role for choice ${n}`);if(o){let{arguments:e,name:l}=o;if(null==e)throw new rL(`missing function_call.arguments for choice ${n}`);if(!l)throw new rL(`missing function_call.name for choice ${n}`);return{...i,message:{content:a,function_call:{arguments:e,name:l},role:c,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:s}}return l?{...i,index:n,finish_reason:r,logprobs:s,message:{...u,role:c,content:a,refusal:t.refusal??null,tool_calls:l.map((t,r)=>{let{function:s,type:i,id:a,...o}=t,{arguments:l,name:u,...c}=s||{};if(null==a)throw new rL(`missing choices[${n}].tool_calls[${r}].id
${nz(e)}`);if(null==i)throw new rL(`missing choices[${n}].tool_calls[${r}].type
${nz(e)}`);if(null==u)throw new rL(`missing choices[${n}].tool_calls[${r}].function.name
${nz(e)}`);if(null==l)throw new rL(`missing choices[${n}].tool_calls[${r}].function.arguments
${nz(e)}`);return{...o,id:a,type:i,function:{...c,name:u,arguments:l}}})}}:{...i,message:{...u,content:a,role:c,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:s}}),created:i,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}},t&&nD(t)?nM(r,t):{...r,choices:r.choices.map(e=>({...e,message:{...e.message,parsed:null,tool_calls:e.message.tool_calls??[]}}))}}(e,nX(this,q,"f"))},z=function(){let e=nX(this,q,"f")?.response_format;return nN(e)?e:null},K=function(e){var t,r,n,s;let i=nX(this,F,"f"),{choices:a,...o}=e;for(let{delta:a,finish_reason:l,index:u,logprobs:c=null,...h}of(i?Object.assign(i,o):i=nV(this,F,{...o,choices:[]},"f"),e.choices)){let e=i.choices[u];if(e||(e=i.choices[u]={finish_reason:l,index:u,message:{},logprobs:c,...h}),c){if(e.logprobs){let{content:n,refusal:s,...i}=c;Object.assign(e.logprobs,i),n&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...n)),s&&((r=e.logprobs).refusal??(r.refusal=[]),e.logprobs.refusal.push(...s))}else e.logprobs=Object.assign({},c)}if(l&&(e.finish_reason=l,nX(this,q,"f")&&nD(nX(this,q,"f")))){if("length"===l)throw new rY;if("content_filter"===l)throw new rQ}if(Object.assign(e,h),!a)continue;let{content:o,refusal:d,function_call:f,role:p,tool_calls:g,...m}=a;if(Object.assign(e.message,m),d&&(e.message.refusal=(e.message.refusal||"")+d),p&&(e.message.role=p),f&&(e.message.function_call?(f.name&&(e.message.function_call.name=f.name),f.arguments&&((n=e.message.function_call).arguments??(n.arguments=""),e.message.function_call.arguments+=f.arguments)):e.message.function_call=f),o&&(e.message.content=(e.message.content||"")+o,!e.message.refusal&&nX(this,U,"m",z).call(this)&&(e.message.parsed=nJ(e.message.content))),g)for(let{index:t,id:r,type:n,function:i,...a}of(e.message.tool_calls||(e.message.tool_calls=[]),g)){let o=(s=e.message.tool_calls)[t]??(s[t]={});Object.assign(o,a),r&&(o.id=r),n&&(o.type=n),i&&(o.function??(o.function={name:i.name??"",arguments:""})),i?.name&&(o.function.name=i.name),i?.arguments&&(o.function.arguments+=i.arguments,function(e,t){if(!e)return!1;let r=e.tools?.find(e=>e.function?.name===t.function.name);return nj(r)||r?.function.strict||!1}(nX(this,q,"f"),o)&&(o.function.parsed_arguments=nJ(o.function.arguments)))}}return i},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("chunk",r=>{let n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),this.on("error",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new tK(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function nz(e){return JSON.stringify(e)}class nK extends nG{static fromReadableStream(e){let t=new nK(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){let n=new nK(null),s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,s)),n}static runTools(e,t,r){let n=new nK(t),s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,s)),n}}class nY extends ns{parse(e,t){return!function(e){for(let t of e??[]){if("function"!==t.type)throw new rL(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new rL(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(t=>nM(t,e))}runFunctions(e,t){return e.stream?nK.runFunctions(this._client,e,t):nq.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?nK.runTools(this._client,e,t):nq.runTools(this._client,e,t)}stream(e,t){return nG.createChatCompletion(this._client,e,t)}}class nQ extends ns{constructor(){super(...arguments),this.completions=new nY(this._client)}}(nQ||(nQ={})).Completions=nY;var nZ=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},n0=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};class n1 extends nI{constructor(){super(...arguments),Y.add(this),Q.set(this,[]),Z.set(this,{}),ee.set(this,{}),et.set(this,void 0),er.set(this,void 0),en.set(this,void 0),es.set(this,void 0),ei.set(this,void 0),ea.set(this,void 0),eo.set(this,void 0),el.set(this,void 0),eu.set(this,void 0)}[(Q=new WeakMap,Z=new WeakMap,ee=new WeakMap,et=new WeakMap,er=new WeakMap,en=new WeakMap,es=new WeakMap,ei=new WeakMap,ea=new WeakMap,eo=new WeakMap,el=new WeakMap,eu=new WeakMap,Y=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("event",r=>{let n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),this.on("error",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let t=new n1;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){let r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();let n=tK.fromReadableStream(e,this.controller);for await(let e of n)nZ(this,Y,"m",ec).call(this,e);if(n.controller.signal?.aborted)throw new rq;return this._addRun(nZ(this,Y,"m",eh).call(this))}toReadableStream(){return new tK(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,n,s){let i=new n1;return i._run(()=>i._runToolAssistantStream(e,t,r,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,t,r,n,s){let i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let a={...n,stream:!0},o=await e.submitToolOutputs(t,r,a,{...s,signal:this.controller.signal});for await(let e of(this._connected(),o))nZ(this,Y,"m",ec).call(this,e);if(o.controller.signal?.aborted)throw new rq;return this._addRun(nZ(this,Y,"m",eh).call(this))}static createThreadAssistantStream(e,t,r){let n=new n1;return n._run(()=>n._threadAssistantStream(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(e,t,r,n){let s=new n1;return s._run(()=>s._runAssistantStream(e,t,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return nZ(this,eo,"f")}currentRun(){return nZ(this,el,"f")}currentMessageSnapshot(){return nZ(this,et,"f")}currentRunStepSnapshot(){return nZ(this,eu,"f")}async finalRunSteps(){return await this.done(),Object.values(nZ(this,Z,"f"))}async finalMessages(){return await this.done(),Object.values(nZ(this,ee,"f"))}async finalRun(){if(await this.done(),!nZ(this,er,"f"))throw Error("Final run was not received.");return nZ(this,er,"f")}async _createThreadAssistantStream(e,t,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));let s={...t,stream:!0},i=await e.createAndRun(s,{...r,signal:this.controller.signal});for await(let e of(this._connected(),i))nZ(this,Y,"m",ec).call(this,e);if(i.controller.signal?.aborted)throw new rq;return this._addRun(nZ(this,Y,"m",eh).call(this))}async _createAssistantStream(e,t,r,n){let s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let i={...r,stream:!0},a=await e.create(t,i,{...n,signal:this.controller.signal});for await(let e of(this._connected(),a))nZ(this,Y,"m",ec).call(this,e);if(a.controller.signal?.aborted)throw new rq;return this._addRun(nZ(this,Y,"m",eh).call(this))}static accumulateDelta(e,t){for(let[r,n]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=n;continue}let t=e[r];if(null==t||"index"===r||"type"===r){e[r]=n;continue}if("string"==typeof t&&"string"==typeof n)t+=n;else if("number"==typeof t&&"number"==typeof n)t+=n;else if(rD(t)&&rD(n))t=this.accumulateDelta(t,n);else if(Array.isArray(t)&&Array.isArray(n)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...n);continue}for(let e of n){if(!rD(e))throw Error(`Expected array delta entry to be an object but got: ${e}`);let r=e.index;if(null==r)throw console.error(e),Error("Expected array delta entry to have an `index` property");if("number"!=typeof r)throw Error(`Expected array delta entry \`index\` property to be a number but got ${r}`);let n=t[r];null==n?t.push(e):t[r]=this.accumulateDelta(n,e)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${n}, accValue: ${t}`);e[r]=t}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,n){return await this._createAssistantStream(t,e,r,n)}async _runToolAssistantStream(e,t,r,n,s){return await this._createToolAssistantStream(r,e,t,n,s)}}ec=function(e){if(!this.ended)switch(n0(this,eo,e,"f"),nZ(this,Y,"m",ep).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":nZ(this,Y,"m",ev).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":nZ(this,Y,"m",ef).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":nZ(this,Y,"m",ed).call(this,e);break;case"error":throw Error("Encountered an error event in event processing - errors should be processed earlier")}},eh=function(){if(this.ended)throw new rL("stream has ended, this shouldn't happen");if(!nZ(this,er,"f"))throw Error("Final run has not been received");return nZ(this,er,"f")},ed=function(e){let[t,r]=nZ(this,Y,"m",em).call(this,e,nZ(this,et,"f"));for(let e of(n0(this,et,t,"f"),nZ(this,ee,"f")[t.id]=t,r)){let r=t.content[e.index];r?.type=="text"&&this._emit("textCreated",r.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(let r of e.data.delta.content){if("text"==r.type&&r.text){let e=r.text,n=t.content[r.index];if(n&&"text"==n.type)this._emit("textDelta",e,n.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=nZ(this,en,"f")){if(nZ(this,es,"f"))switch(nZ(this,es,"f").type){case"text":this._emit("textDone",nZ(this,es,"f").text,nZ(this,et,"f"));break;case"image_file":this._emit("imageFileDone",nZ(this,es,"f").image_file,nZ(this,et,"f"))}n0(this,en,r.index,"f")}n0(this,es,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==nZ(this,en,"f")){let t=e.data.content[nZ(this,en,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,nZ(this,et,"f"));break;case"text":this._emit("textDone",t.text,nZ(this,et,"f"))}}nZ(this,et,"f")&&this._emit("messageDone",e.data),n0(this,et,void 0,"f")}},ef=function(e){let t=nZ(this,Y,"m",eg).call(this,e);switch(n0(this,eu,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let r=e.data.delta;if(r.step_details&&"tool_calls"==r.step_details.type&&r.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(let e of r.step_details.tool_calls)e.index==nZ(this,ei,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(nZ(this,ea,"f")&&this._emit("toolCallDone",nZ(this,ea,"f")),n0(this,ei,e.index,"f"),n0(this,ea,t.step_details.tool_calls[e.index],"f"),nZ(this,ea,"f")&&this._emit("toolCallCreated",nZ(this,ea,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":n0(this,eu,void 0,"f"),"tool_calls"==e.data.step_details.type&&nZ(this,ea,"f")&&(this._emit("toolCallDone",nZ(this,ea,"f")),n0(this,ea,void 0,"f")),this._emit("runStepDone",e.data,t)}},ep=function(e){nZ(this,Q,"f").push(e),this._emit("event",e)},eg=function(e){switch(e.event){case"thread.run.step.created":return nZ(this,Z,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=nZ(this,Z,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){let n=n1.accumulateDelta(t,r.delta);nZ(this,Z,"f")[e.data.id]=n}return nZ(this,Z,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":nZ(this,Z,"f")[e.data.id]=e.data}if(nZ(this,Z,"f")[e.data.id])return nZ(this,Z,"f")[e.data.id];throw Error("No snapshot available")},em=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=e.data;if(n.delta.content)for(let e of n.delta.content)if(e.index in t.content){let r=t.content[e.index];t.content[e.index]=nZ(this,Y,"m",ey).call(this,e,r)}else t.content[e.index]=e,r.push(e);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ey=function(e,t){return n1.accumulateDelta(t,e)},ev=function(e){switch(n0(this,el,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":n0(this,er,e.data,"f"),nZ(this,ea,"f")&&(this._emit("toolCallDone",nZ(this,ea,"f")),n0(this,ea,void 0,"f"))}};class n2 extends ns{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,t,r,n){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e,t={},r){return ry(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,n4,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class n4 extends nn{}(n2||(n2={})).MessagesPage=n4;class n3 extends ns{retrieve(e,t,r,n={},s){return ry(n)?this.retrieve(e,t,r,{},n):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,t,r={},n){return ry(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,n6,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class n6 extends nn{}(n3||(n3={})).RunStepsPage=n6;class n8 extends ns{constructor(){super(...arguments),this.steps=new n3(this._client)}create(e,t,r){let{include:n,...s}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:n},body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,t,r,n){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e,t={},r){return ry(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,n9,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,t,r){let n=await this.create(e,t,r);return await this.poll(e,n.id,r)}createAndStream(e,t,r){return n1.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){let n={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){let{data:s,response:i}=await this.retrieve(e,t,{...r,headers:{...r?.headers,...n}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{let e=i.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(a=t)}}await rC(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,t,r){return n1.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,n){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,t,r,n){let s=await this.submitToolOutputs(e,t,r,n);return await this.poll(e,s.id,n)}submitToolOutputsStream(e,t,r,n){return n1.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,n)}}class n9 extends nn{}!function(e){e.RunsPage=n9,e.Steps=n3,e.RunStepsPage=n6}(n8||(n8={}));class n5 extends ns{constructor(){super(...arguments),this.runs=new n8(this._client),this.messages=new n2(this._client)}create(e={},t){return ry(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){let r=await this.createAndRun(e,t);return await this.runs.poll(r.thread_id,r.id,t)}createAndRunStream(e,t){return n1.createThreadAssistantStream(e,this._client.beta.threads,t)}}!function(e){e.Runs=n8,e.RunsPage=n9,e.Messages=n2,e.MessagesPage=n4}(n5||(n5={}));let n7=async e=>{let t=await Promise.allSettled(e),r=t.filter(e=>"rejected"===e.status);if(r.length){for(let e of r)console.error(e.reason);throw Error(`${r.length} promise(s) failed - see the above errors`)}let n=[];for(let e of t)"fulfilled"===e.status&&n.push(e.value);return n};class se extends ns{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},r){return ry(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,st,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,t,r){let n=await this.create(e,t,r);return await this.poll(e,n.id,r)}async poll(e,t,r){let n={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){let s=await this.retrieve(e,t,{...r,headers:n}).withResponse(),i=s.data;switch(i.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{let e=s.response.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(a=t)}}await rC(a);break;case"failed":case"completed":return i}}}async upload(e,t,r){let n=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:n.id},r)}async uploadAndPoll(e,t,r){let n=await this.upload(e,t,r);return await this.poll(e,n.id,r)}}class st extends nn{}(se||(se={})).VectorStoreFilesPage=st;class sr extends ns{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,t,r){let n=await this.create(e,t);return await this.poll(e,n.id,r)}listFiles(e,t,r={},n){return ry(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,st,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async poll(e,t,r){let n={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){let{data:s,response:i}=await this.retrieve(e,t,{...r,headers:n}).withResponse();switch(s.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{let e=i.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(a=t)}}await rC(a);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},n){if(null==t||0==t.length)throw Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let s=Math.min(n?.maxConcurrency??5,t.length),i=this._client,a=t.values(),o=[...r];async function l(e){for(let t of e){let e=await i.files.create({file:t,purpose:"assistants"},n);o.push(e.id)}}let u=Array(s).fill(a).map(l);return await n7(u),await this.createAndPoll(e,{file_ids:o})}}sr||(sr={});class sn extends ns{constructor(){super(...arguments),this.files=new se(this._client),this.fileBatches=new sr(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},t){return ry(e)?this.list({},e):this._client.getAPIList("/vector_stores",ss,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class ss extends nn{}!function(e){e.VectorStoresPage=ss,e.Files=se,e.VectorStoreFilesPage=st,e.FileBatches=sr}(sn||(sn={}));class si extends ns{constructor(){super(...arguments),this.vectorStores=new sn(this._client),this.chat=new nQ(this._client),this.assistants=new nC(this._client),this.threads=new n5(this._client)}}!function(e){e.VectorStores=sn,e.VectorStoresPage=ss,e.Chat=nQ,e.Assistants=nC,e.AssistantsPage=nR,e.Threads=n5}(si||(si={}));class sa extends ns{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return ry(e)?this.list({},e):this._client.getAPIList("/batches",so,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class so extends nn{}(sa||(sa={})).BatchesPage=so;class sl extends ns{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,rr({body:t,...r}))}}sl||(sl={});class su extends ns{constructor(){super(...arguments),this.parts=new sl(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(`/uploads/${e}/complete`,{body:t,...r})}}(su||(su={})).Parts=sl;class sc extends rd{constructor({baseURL:e=rP("OPENAI_BASE_URL"),apiKey:t=rP("OPENAI_API_KEY"),organization:r=rP("OPENAI_ORG_ID")??null,project:n=rP("OPENAI_PROJECT_ID")??null,...s}={}){if(void 0===t)throw new rL("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");let i={apiKey:t,organization:r,project:n,...s,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&rN())throw new rL("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new ni(this),this.chat=new no(this),this.embeddings=new nl(this),this.files=new nu(this),this.images=new nh(this),this.audio=new ng(this),this.moderations=new nm(this),this.models=new ny(this),this.fineTuning=new nE(this),this.beta=new si(this),this.batches=new sa(this),this.uploads=new su(this),this._options=i,this.apiKey=t,this.organization=r,this.project=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return function(e,t={}){let r,n=e,s=function(e=ne){let t;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");let r=e.charset||ne.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=rZ;if(void 0!==e.format){if(!r3.call(r0,e.format))throw TypeError("Unknown format option provided.");n=e.format}let s=r0[n],i=ne.filter;if(("function"==typeof e.filter||r8(e.filter))&&(i=e.filter),t=e.arrayFormat&&e.arrayFormat in r6?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":ne.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");let a=void 0===e.allowDots?!0==!!e.encodeDotInKeys||ne.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:ne.addQueryPrefix,allowDots:a,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:ne.allowEmptyArrays,arrayFormat:t,charset:r,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:ne.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?ne.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:ne.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:ne.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:ne.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:ne.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:ne.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:ne.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:ne.strictNullHandling}}(t);"function"==typeof s.filter?n=(0,s.filter)("",n):r8(s.filter)&&(r=s.filter);let i=[];if("object"!=typeof n||null===n)return"";let a=r6[s.arrayFormat],o="comma"===a&&s.commaRoundTrip;r||(r=Object.keys(n)),s.sort&&r.sort(s.sort);let l=new WeakMap;for(let e=0;e<r.length;++e){let t=r[e];s.skipNulls&&null===n[t]||r5(i,function e(t,r,n,s,i,a,o,l,u,c,h,d,f,p,g,m,y,v){var w,b;let _,x=t,S=v,E=0,C=!1;for(;void 0!==(S=S.get(nt))&&!C;){let e=S.get(t);if(E+=1,void 0!==e){if(e===E)throw RangeError("Cyclic object value");C=!0}void 0===S.get(nt)&&(E=0)}if("function"==typeof c?x=c(r,x):x instanceof Date?x=f?.(x):"comma"===n&&r8(x)&&(x=r4(x,function(e){return e instanceof Date?f?.(e):e})),null===x){if(a)return u&&!m?u(r,ne.encoder,y,"key",p):r;x=""}if("string"==typeof(w=x)||"number"==typeof w||"boolean"==typeof w||"symbol"==typeof w||"bigint"==typeof w||(b=x)&&"object"==typeof b&&b.constructor&&b.constructor.isBuffer&&b.constructor.isBuffer(b)){if(u){let e=m?r:u(r,ne.encoder,y,"key",p);return[g?.(e)+"="+g?.(u(x,ne.encoder,y,"value",p))]}return[g?.(r)+"="+g?.(String(x))]}let R=[];if(void 0===x)return R;if("comma"===n&&r8(x))m&&u&&(x=r4(x,u)),_=[{value:x.length>0?x.join(",")||null:void 0}];else if(r8(c))_=c;else{let e=Object.keys(x);_=h?e.sort(h):e}let A=l?String(r).replace(/\./g,"%2E"):String(r),P=s&&r8(x)&&1===x.length?A+"[]":A;if(i&&r8(x)&&0===x.length)return P+"[]";for(let r=0;r<_.length;++r){let w=_[r],b="object"==typeof w&&void 0!==w.value?w.value:x[w];if(o&&null===b)continue;let S=d&&l?w.replace(/\./g,"%2E"):w,C=r8(x)?"function"==typeof n?n(P,S):P:P+(d?"."+S:"["+S+"]");v.set(t,E);let A=new WeakMap;A.set(nt,v),r5(R,e(b,C,n,s,i,a,o,l,"comma"===n&&m&&r8(x)?null:u,c,h,d,f,p,g,m,y,A))}return R}(n[t],t,a,o,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,l))}let u=i.join(s.delimiter),c=!0===s.addQueryPrefix?"?":"";return s.charsetSentinel&&("iso-8859-1"===s.charset?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),u.length>0?c+u:""}(e,{arrayFormat:"brackets"})}}ew=sc,sc.OpenAI=ew,sc.DEFAULT_TIMEOUT=6e5,sc.OpenAIError=rL,sc.APIError=rU,sc.APIConnectionError=rH,sc.APIConnectionTimeoutError=rF,sc.APIUserAbortError=rq,sc.NotFoundError=rV,sc.ConflictError=rX,sc.RateLimitError=rz,sc.BadRequestError=rB,sc.AuthenticationError=rW,sc.InternalServerError=rK,sc.PermissionDeniedError=rJ,sc.UnprocessableEntityError=rG,sc.toFile=t9,sc.fileFromPath=p;let{OpenAIError:sh,APIError:sd,APIConnectionError:sf,APIConnectionTimeoutError:sp,APIUserAbortError:sg,NotFoundError:sm,ConflictError:sy,RateLimitError:sv,BadRequestError:sw,AuthenticationError:sb,InternalServerError:s_,PermissionDeniedError:sx,UnprocessableEntityError:sS}=eb;!function(e){e.Page=nr,e.CursorPage=nn,e.Completions=ni,e.Chat=no,e.Embeddings=nl,e.Files=nu,e.FileObjectsPage=nc,e.Images=nh,e.Audio=ng,e.Moderations=nm,e.Models=ny,e.ModelsPage=nv,e.FineTuning=nE,e.Beta=si,e.Batches=sa,e.BatchesPage=so,e.Uploads=su}(sc||(sc={}));let sE=new sc({apiKey:process.env.OPENAI_API_KEY}),sC="edge";async function sR(e){try{let{messages:t}=await e.json(),r=await sE.chat.completions.create({model:"gpt-3.5-turbo",stream:!0,messages:[{role:"system",content:"Vous \xeates un assistant virtuel pour Romain KORDALSKI, un d\xe9veloppeur web. Votre r\xf4le est de r\xe9pondre aux questions concernant ses comp\xe9tences, son exp\xe9rience et sa formation."},...t]}),n=new ReadableStream({async start(e){for await(let t of r){let r=t.choices[0]?.delta?.content||"",n=new TextEncoder;e.enqueue(n.encode(r))}e.close()}});return new Response(n,{headers:{"Content-Type":"text/event-stream"}})}catch(e){return console.error("Erreur dans le chatbot:",e),new Response("Erreur interne du serveur",{status:500})}}let sA=new tW.AppRouteRouteModule({definition:{kind:m.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"/Users/Romain/Documents/Site cv lm/romaincv/src/app/api/chat/route.ts",nextConfigOutput:"",userland:e_}),{requestAsyncStorage:sP,staticGenerationAsyncStorage:sO,serverHooks:sT}=sA,sk="/api/chat/route";function s$(){return(0,tJ.XH)({serverHooks:sT,staticGenerationAsyncStorage:sO})}let sI=ex,sN=tB.wrap(sA)},723:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DiagConsoleLogger:()=>N,DiagLogLevel:()=>n,INVALID_SPANID:()=>eh,INVALID_SPAN_CONTEXT:()=>ef,INVALID_TRACEID:()=>ed,ProxyTracer:()=>ek,ProxyTracerProvider:()=>eI,ROOT_CONTEXT:()=>$,SamplingDecision:()=>a,SpanKind:()=>o,SpanStatusCode:()=>l,TraceFlags:()=>i,ValueType:()=>s,baggageEntryMetadataFromString:()=>T,context:()=>eq,createContextKey:()=>k,createNoopMeter:()=>ee,createTraceState:()=>eU,default:()=>e2,defaultTextMapGetter:()=>et,defaultTextMapSetter:()=>er,diag:()=>eH,isSpanContextValid:()=>eR,isValidSpanId:()=>eC,isValidTraceId:()=>eE,metrics:()=>eW,propagation:()=>eZ,trace:()=>e1});var n,s,i,a,o,l,u="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof r.g?r.g:{},c="1.9.0",h=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,d=function(e){var t=new Set([e]),r=new Set,n=e.match(h);if(!n)return function(){return!1};var s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=s.prerelease)return function(t){return t===e};function i(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(h);if(!n)return i(e);var a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};return null!=a.prerelease||s.major!==a.major?i(e):0===s.major?s.minor===a.minor&&s.patch<=a.patch?(t.add(e),!0):i(e):s.minor<=a.minor?(t.add(e),!0):i(e)}}(c),f=Symbol.for("opentelemetry.js.api."+c.split(".")[0]);function p(e,t,r,n){void 0===n&&(n=!1);var s,i=u[f]=null!==(s=u[f])&&void 0!==s?s:{version:c};if(!n&&i[e]){var a=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(a.stack||a.message),!1}if(i.version!==c){var a=Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+c);return r.error(a.stack||a.message),!1}return i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+c+"."),!0}function g(e){var t,r,n=null===(t=u[f])||void 0===t?void 0:t.version;if(n&&d(n))return null===(r=u[f])||void 0===r?void 0:r[e]}function m(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+c+".");var r=u[f];r&&delete r[e]}var y=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return a},v=function(e,t,r){if(r||2==arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},w=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b("verbose",this._namespace,e)},e}();function b(e,t,r){var n=g("diag");if(n)return r.unshift(t),n[e].apply(n,v([],y(r),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(n||(n={}));var _=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return a},x=function(e,t,r){if(r||2==arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},S=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=g("diag");if(n)return n[e].apply(n,x([],_(t),!1))}}var t=this;t.setLogger=function(e,r){if(void 0===r&&(r={logLevel:n.INFO}),e===t){var s,i,a,o=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(s=o.stack)&&void 0!==s?s:o.message),!1}"number"==typeof r&&(r={logLevel:r});var l=g("diag"),u=function(e,t){function r(r,n){var s=t[r];return"function"==typeof s&&e>=n?s.bind(t):function(){}}return e<n.NONE?e=n.NONE:e>n.ALL&&(e=n.ALL),t=t||{},{error:r("error",n.ERROR),warn:r("warn",n.WARN),info:r("info",n.INFO),debug:r("debug",n.DEBUG),verbose:r("verbose",n.VERBOSE)}}(null!==(i=r.logLevel)&&void 0!==i?i:n.INFO,e);if(l&&!r.suppressOverrideMessage){var c=null!==(a=Error().stack)&&void 0!==a?a:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+c),u.warn("Current logger will overwrite one already registered from "+c)}return p("diag",u,t,!0)},t.disable=function(){m("diag",t)},t.createComponentLogger=function(e){return new w(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),E=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return a},C=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},R=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=E(e,2);return[t[0],t[1]]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t,r,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var i=new e(this._entries);try{for(var a=C(n),o=a.next();!o.done;o=a.next()){var l=o.value;i._entries.delete(l)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},e.prototype.clear=function(){return new e},e}(),A=Symbol("BaggageEntryMetadata"),P=S.instance();function O(e){return void 0===e&&(e={}),new R(new Map(Object.entries(e)))}function T(e){return"string"!=typeof e&&(P.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:A,toString:function(){return e}}}function k(e){return Symbol.for(e)}var $=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var s=new e(r._currentContext);return s._currentContext.set(t,n),s},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}},I=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],N=function(){for(var e=0;e<I.length;e++)this[I[e].n]=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(console){var n=console[e];if("function"!=typeof n&&(n=console.log),"function"==typeof n)return n.apply(console,t)}}}(I[e].c)},j=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),M=function(){function e(){}return e.prototype.createGauge=function(e,t){return G},e.prototype.createHistogram=function(e,t){return z},e.prototype.createCounter=function(e,t){return X},e.prototype.createUpDownCounter=function(e,t){return K},e.prototype.createObservableGauge=function(e,t){return Q},e.prototype.createObservableCounter=function(e,t){return Y},e.prototype.createObservableUpDownCounter=function(e,t){return Z},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),D=function(){},L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),t.prototype.add=function(e,t){},t}(D),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),t.prototype.add=function(e,t){},t}(D),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),t.prototype.record=function(e,t){},t}(D),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),t.prototype.record=function(e,t){},t}(D),F=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),t}(F),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),t}(F),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),t}(F),V=new M,X=new L,G=new q,z=new H,K=new U,Y=new B,Q=new W,Z=new J;function ee(){return V}!function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(s||(s={}));var et={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},er={set:function(e,t,r){null!=e&&(e[t]=r)}},en=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return a},es=function(e,t,r){if(r||2==arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},ei=function(){function e(){}return e.prototype.active=function(){return $},e.prototype.with=function(e,t,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];return t.call.apply(t,es([r],en(n),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),ea=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return a},eo=function(e,t,r){if(r||2==arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},el="context",eu=new ei,ec=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return p(el,e,S.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var n,s=[],i=3;i<arguments.length;i++)s[i-3]=arguments[i];return(n=this._getContextManager()).with.apply(n,eo([e,t,r],ea(s),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return g(el)||eu},e.prototype.disable=function(){this._getContextManager().disable(),m(el,S.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(i||(i={}));var eh="0000000000000000",ed="00000000000000000000000000000000",ef={traceId:ed,spanId:eh,traceFlags:i.NONE},ep=function(){function e(e){void 0===e&&(e=ef),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),eg=k("OpenTelemetry Context Key SPAN");function em(e){return e.getValue(eg)||void 0}function ey(){return em(ec.getInstance().active())}function ev(e,t){return e.setValue(eg,t)}function ew(e){return e.deleteValue(eg)}function eb(e,t){return ev(e,new ep(t))}function e_(e){var t;return null===(t=em(e))||void 0===t?void 0:t.spanContext()}var ex=/^([0-9a-f]{32})$/i,eS=/^[0-9a-f]{16}$/i;function eE(e){return ex.test(e)&&e!==ed}function eC(e){return eS.test(e)&&e!==eh}function eR(e){return eE(e.traceId)&&eC(e.spanId)}function eA(e){return new ep(e)}var eP=ec.getInstance(),eO=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(void 0===r&&(r=eP.active()),null==t?void 0:t.root)return new ep;var n=r&&e_(r);return"object"==typeof n&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&eR(n)?new ep(n):new ep},e.prototype.startActiveSpan=function(e,t,r,n){if(!(arguments.length<2)){2==arguments.length?a=t:3==arguments.length?(s=t,a=r):(s=t,i=r,a=n);var s,i,a,o=null!=i?i:eP.active(),l=this.startSpan(e,s,o),u=ev(o,l);return eP.with(u,a,void 0,l)}},e}(),eT=new eO,ek=function(){function e(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):eT},e}(),e$=new(function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new eO},e}()),eI=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var n;return null!==(n=this.getDelegateTracer(e,t,r))&&void 0!==n?n:new ek(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:e$},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,r)},e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(a||(a={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(o||(o={})),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(l||(l={}));var eN="[_0-9a-z-*/]",ej=RegExp("^(?:[a-z]"+eN+"{0,255}|"+("[a-z0-9]"+eN)+"{0,240}@[a-z]"+eN+"{0,13})$"),eM=/^[ -~]{0,255}[!-~]$/,eD=/,|=/,eL=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,r){return t.push(r+"="+e.get(r)),t},[]).join(",")},e.prototype._parse=function(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce(function(e,t){var r=t.trim(),n=r.indexOf("=");if(-1!==n){var s=r.slice(0,n),i=r.slice(n+1,t.length);ej.test(s)&&eM.test(i)&&!eD.test(i)&&e.set(s,i)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function eU(e){return new eL(e)}var eq=ec.getInstance(),eH=S.instance(),eF=new(function(){function e(){}return e.prototype.getMeter=function(e,t,r){return V},e}()),eB="metrics",eW=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return p(eB,e,S.instance())},e.prototype.getMeterProvider=function(){return g(eB)||eF},e.prototype.getMeter=function(e,t,r){return this.getMeterProvider().getMeter(e,t,r)},e.prototype.disable=function(){m(eB,S.instance())},e})().getInstance(),eJ=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),eV=k("OpenTelemetry Baggage Key");function eX(e){return e.getValue(eV)||void 0}function eG(){return eX(ec.getInstance().active())}function ez(e,t){return e.setValue(eV,t)}function eK(e){return e.deleteValue(eV)}var eY="propagation",eQ=new eJ,eZ=(function(){function e(){this.createBaggage=O,this.getBaggage=eX,this.getActiveBaggage=eG,this.setBaggage=ez,this.deleteBaggage=eK}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return p(eY,e,S.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=er),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=et),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){m(eY,S.instance())},e.prototype._getGlobalPropagator=function(){return g(eY)||eQ},e})().getInstance(),e0="trace",e1=(function(){function e(){this._proxyTracerProvider=new eI,this.wrapSpanContext=eA,this.isSpanContextValid=eR,this.deleteSpan=ew,this.getSpan=em,this.getActiveSpan=ey,this.getSpanContext=e_,this.setSpan=ev,this.setSpanContext=eb}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=p(e0,this._proxyTracerProvider,S.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return g(e0)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){m(e0,S.instance()),this._proxyTracerProvider=new eI},e})().getInstance();let e2={context:eq,diag:eH,metrics:eW,propagation:eZ,trace:e1}},676:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,i={};function a(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function o(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,s]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=s?s:"true"))}catch{}}return t}function l(e){var t,r;if(!e)return;let[[n,s],...i]=o(e),{domain:a,expires:l,httponly:h,maxage:d,path:f,samesite:p,secure:g,partitioned:m,priority:y}=Object.fromEntries(i.map(([e,t])=>[e.toLowerCase(),t]));return function(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}({name:n,value:decodeURIComponent(s),domain:a,...l&&{expires:new Date(l)},...h&&{httpOnly:!0},..."string"==typeof d&&{maxAge:Number(d)},path:f,...p&&{sameSite:u.includes(t=(t=p).toLowerCase())?t:void 0},...g&&{secure:!0},...y&&{priority:c.includes(r=(r=y).toLowerCase())?r:void 0},...m&&{partitioned:!0}})}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{RequestCookies:()=>h,ResponseCookies:()=>d,parseCookie:()=>o,parseSetCookie:()=>l,stringifyCookie:()=>a}),e.exports=((e,i,a,o)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let l of n(i))s.call(e,l)||l===a||t(e,l,{get:()=>i[l],enumerable:!(o=r(i,l))||o.enumerable});return e})(t({},"__esModule",{value:!0}),i);var u=["strict","lax","none"],c=["low","medium","high"],h=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,r]of o(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>a(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>a(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},d=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;let s=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(let e of Array.isArray(s)?s:function(e){if(!e)return[];var t,r,n,s,i,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,i=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),s=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(i=!0,o=s,a.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!i||o>=e.length)&&a.push(e.substring(t,e.length))}return a}(s)){let t=l(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,s=this._parsed;return s.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=a(r);t.append("set-cookie",e)}}(s,this._headers),this}delete(...e){let[t,r,n]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:r,domain:n,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(a).join("; ")}}},337:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//");var t={};(()=>{t.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var s={},i=t.split(n),a=(r||{}).decode||e,o=0;o<i.length;o++){var l=i[o],u=l.indexOf("=");if(!(u<0)){var c=l.substr(0,u).trim(),h=l.substr(++u,l.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),void 0==s[c]&&(s[c]=function(e,t){try{return t(e)}catch(t){return e}}(h,a))}}return s},t.serialize=function(e,t,n){var i=n||{},a=i.encode||r;if("function"!=typeof a)throw TypeError("option encode is invalid");if(!s.test(e))throw TypeError("argument name is invalid");var o=a(t);if(o&&!s.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=i.maxAge){var u=i.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(i.domain){if(!s.test(i.domain))throw TypeError("option domain is invalid");l+="; Domain="+i.domain}if(i.path){if(!s.test(i.path))throw TypeError("option path is invalid");l+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(l+="; HttpOnly"),i.secure&&(l+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var e=decodeURIComponent,r=encodeURIComponent,n=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),e.exports=t})()},996:e=>{(()=>{"use strict";var t={806:(e,t,r)=>{let n=r(190),s=Symbol("max"),i=Symbol("length"),a=Symbol("lengthCalculator"),o=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),h=Symbol("lruList"),d=Symbol("cache"),f=Symbol("updateAgeOnGet"),p=()=>1;class g{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw TypeError("max must be a non-negative number");this[s]=e.max||1/0;let t=e.length||p;if(this[a]="function"!=typeof t?p:t,this[o]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[u]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw TypeError("max must be a non-negative number");this[s]=e||1/0,v(this)}get max(){return this[s]}set allowStale(e){this[o]=!!e}get allowStale(){return this[o]}set maxAge(e){if("number"!=typeof e)throw TypeError("maxAge must be a non-negative number");this[l]=e,v(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=p),e!==this[a]&&(this[a]=e,this[i]=0,this[h].forEach(e=>{e.length=this[a](e.value,e.key),this[i]+=e.length})),v(this)}get lengthCalculator(){return this[a]}get length(){return this[i]}get itemCount(){return this[h].length}rforEach(e,t){t=t||this;for(let r=this[h].tail;null!==r;){let n=r.prev;_(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[h].head;null!==r;){let n=r.next;_(this,e,r,t),r=n}}keys(){return this[h].toArray().map(e=>e.key)}values(){return this[h].toArray().map(e=>e.value)}reset(){this[u]&&this[h]&&this[h].length&&this[h].forEach(e=>this[u](e.key,e.value)),this[d]=new Map,this[h]=new n,this[i]=0}dump(){return this[h].map(e=>!y(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[h]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw TypeError("maxAge must be a number");let n=r?Date.now():0,o=this[a](t,e);if(this[d].has(e)){if(o>this[s])return w(this,this[d].get(e)),!1;let a=this[d].get(e).value;return this[u]&&!this[c]&&this[u](e,a.value),a.now=n,a.maxAge=r,a.value=t,this[i]+=o-a.length,a.length=o,this.get(e),v(this),!0}let f=new b(e,t,o,n,r);return f.length>this[s]?(this[u]&&this[u](e,t),!1):(this[i]+=f.length,this[h].unshift(f),this[d].set(e,this[h].head),v(this),!0)}has(e){return!!this[d].has(e)&&!y(this,this[d].get(e).value)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){let e=this[h].tail;return e?(w(this,e),e.value):null}del(e){w(this,this[d].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let n=e[r],s=n.e||0;if(0===s)this.set(n.k,n.v);else{let e=s-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[d].forEach((e,t)=>m(this,t,!1))}}let m=(e,t,r)=>{let n=e[d].get(t);if(n){let t=n.value;if(y(e,t)){if(w(e,n),!e[o])return}else r&&(e[f]&&(n.value.now=Date.now()),e[h].unshiftNode(n));return t.value}},y=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]},v=e=>{if(e[i]>e[s])for(let t=e[h].tail;e[i]>e[s]&&null!==t;){let r=t.prev;w(e,t),t=r}},w=(e,t)=>{if(t){let r=t.value;e[u]&&e[u](r.key,r.value),e[i]-=r.length,e[d].delete(r.key),e[h].removeNode(t)}};class b{constructor(e,t,r,n,s){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=s||0}}let _=(e,t,r,n)=>{let s=r.value;y(e,s)&&(w(e,r),e[o]||(s=void 0)),s&&t.call(n,s.value,s.key,e)};e.exports=g},76:e=>{e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},190:(e,t,r)=>{function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)t.push(arguments[r]);return t}function s(e,t,r,n){if(!(this instanceof s))return new s(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=s,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.tail=new s(e,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},n.prototype.unshift=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.head=new s(e,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,s=this.head;null!==s;)r.push(e.call(t,s.value,this)),s=s.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,s=this.tail;null!==s;)r.push(e.call(t,s.value,this)),s=s.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var s=0;null!==n;s++)r=e(r,n.value,s),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;null!==n;s--)r=e(r,n.value,s),n=n.prev;return r},n.prototype.toArray=function(){for(var e=Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=0,i=this.head;null!==i&&s<e;s++)i=i.next;for(;null!==i&&s<t;s++,i=i.next)r.push(i.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=this.length,i=this.tail;null!==i&&s>t;s--)i=i.prev;for(;null!==i&&s>e;s--,i=i.prev)r.push(i.value);return r},n.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,n=this.head;null!==n&&r<e;r++)n=n.next;for(var i=[],r=0;n&&r<t;r++)i.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var r=2;r<arguments.length;r++)n=function(e,t,r){var n=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}(this,n,arguments[r]);return i},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(76)(n)}catch(e){}}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var i=r[e]={exports:{}},a=!0;try{t[e](i,i.exports,n),a=!1}finally{a&&delete r[e]}return i.exports}n.ab="//";var s=n(806);e.exports=s})()},960:(e,t,r)=>{!function(){var t={452:function(e){"use strict";e.exports=r(28)}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}},a=!0;try{t[e](i,i.exports,s),a=!1}finally{a&&delete n[e]}return i.exports}s.ab="//";var i={};!function(){var e,t=(e=s(452))&&"object"==typeof e&&"default"in e?e.default:e,r=/https?|ftp|gopher|file/;function n(e){"string"==typeof e&&(e=y(e));var n,s,i,a,o,l,u,c,h,d=(s=(n=e).auth,i=n.hostname,a=n.protocol||"",o=n.pathname||"",l=n.hash||"",u=n.query||"",c=!1,s=s?encodeURIComponent(s).replace(/%3A/i,":")+"@":"",n.host?c=s+n.host:i&&(c=s+(~i.indexOf(":")?"["+i+"]":i),n.port&&(c+=":"+n.port)),u&&"object"==typeof u&&(u=t.encode(u)),h=n.search||u&&"?"+u||"",a&&":"!==a.substr(-1)&&(a+=":"),n.slashes||(!a||r.test(a))&&!1!==c?(c="//"+(c||""),o&&"/"!==o[0]&&(o="/"+o)):c||(c=""),l&&"#"!==l[0]&&(l="#"+l),h&&"?"!==h[0]&&(h="?"+h),{protocol:a,host:c,pathname:o=o.replace(/[?#]/g,encodeURIComponent),search:h=h.replace("#","%23"),hash:l});return""+d.protocol+d.host+d.pathname+d.search+d.hash}var a="http://",o=a+"w.w",l=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,u=/https?|ftp|gopher|file/;function c(e,t){var r="string"==typeof e?y(e):e;e="object"==typeof e?n(e):e;var s=y(t),i="";r.protocol&&!r.slashes&&(i=r.protocol,e=e.replace(r.protocol,""),i+="/"===t[0]||"/"===e[0]?"/":""),i&&s.protocol&&(i="",s.slashes||(i=s.protocol,t=t.replace(s.protocol,"")));var c=e.match(l);c&&!s.protocol&&(e=e.substr((i=c[1]+(c[2]||"")).length),/^\/\/[^/]/.test(t)&&(i=i.slice(0,-1)));var h=new URL(e,o+"/"),d=new URL(t,h).toString().replace(o,""),f=s.protocol||r.protocol;return f+=r.slashes||s.slashes?"//":"",!i&&f?d=d.replace(a,f):i&&(d=d.replace(a,"")),u.test(d)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==d.slice(-1)||(d=d.slice(0,-1)),i&&(d=i+("/"===d[0]?d.substr(1):d)),d}function h(){}h.prototype.parse=y,h.prototype.format=n,h.prototype.resolve=c,h.prototype.resolveObject=c;var d=/^https?|ftp|gopher|file/,f=/^(.*?)([#?].*)/,p=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,g=/^([a-z0-9.+-]*:)?\/\/\/*/i,m=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function y(e,r,s){if(void 0===r&&(r=!1),void 0===s&&(s=!1),e&&"object"==typeof e&&e instanceof h)return e;var i=(e=e.trim()).match(f);e=i?i[1].replace(/\\/g,"/")+i[2]:e.replace(/\\/g,"/"),m.test(e)&&"/"!==e.slice(-1)&&(e+="/");var a=!/(^javascript)/.test(e)&&e.match(p),l=g.test(e),u="";a&&(d.test(a[1])||(u=a[1].toLowerCase(),e=""+a[2]+a[3]),a[2]||(l=!1,d.test(a[1])?(u=a[1],e=""+a[3]):e="//"+a[3]),3!==a[2].length&&1!==a[2].length||(u=a[1],e="/"+a[3]));var c,y=(i?i[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),v=y&&y[1],w=new h,b="",_="";try{c=new URL(e)}catch(t){b=t,u||s||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(_="/",e=e.substr(1));try{c=new URL(e,o)}catch(e){return w.protocol=u,w.href=u,w}}w.slashes=l&&!_,w.host="w.w"===c.host?"":c.host,w.hostname="w.w"===c.hostname?"":c.hostname.replace(/(\[|\])/g,""),w.protocol=b?u||null:c.protocol,w.search=c.search.replace(/\\/g,"%5C"),w.hash=c.hash.replace(/\\/g,"%5C");var x=e.split("#");!w.search&&~x[0].indexOf("?")&&(w.search="?"),w.hash||""!==x[1]||(w.hash="#"),w.query=r?t.decode(c.search.substr(1)):w.search.substr(1),w.pathname=_+(a?c.pathname.replace(/['^|`]/g,function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(e,t){try{return decodeURIComponent(t).split("").map(function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()}).join("")}catch(e){return t}}):c.pathname),"about:"===w.protocol&&"blank"===w.pathname&&(w.protocol="",w.pathname=""),b&&"/"!==e[0]&&(w.pathname=w.pathname.substr(1)),u&&!d.test(u)&&"/"!==e.slice(-1)&&"/"===w.pathname&&(w.pathname=""),w.path=w.pathname+w.search,w.auth=[c.username,c.password].map(decodeURIComponent).filter(Boolean).join(":"),w.port=c.port,v&&!w.host.endsWith(v)&&(w.host+=v,w.port=v.slice(1)),w.href=_?""+w.pathname+w.search+w.hash:n(w);var S=/^(file)/.test(w.href)?["host","hostname"]:[];return Object.keys(w).forEach(function(e){~S.indexOf(e)||(w[e]=w[e]||null)}),w}i.parse=y,i.format=n,i.resolve=c,i.resolveObject=function(e,t){return y(c(e,t))},i.Url=h}(),e.exports=i}()},914:e=>{!function(){"use strict";var t={114:function(e){function t(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",s=0,i=-1,a=0,o=0;o<=e.length;++o){if(o<e.length)r=e.charCodeAt(o);else if(47===r)break;else r=47;if(47===r){if(i===o-1||1===a);else if(i!==o-1&&2===a){if(n.length<2||2!==s||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2)){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",s=0):s=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),i=o,a=0;continue}}else if(2===n.length||1===n.length){n="",s=0,i=o,a=0;continue}}t&&(n.length>0?n+="/..":n="..",s=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),s=o-i-1;i=o,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var n={resolve:function(){for(var e,n,s="",i=!1,a=arguments.length-1;a>=-1&&!i;a--)a>=0?n=arguments[a]:(void 0===e&&(e=""),n=e),t(n),0!==n.length&&(s=n+"/"+s,i=47===n.charCodeAt(0));return(s=r(s,!i),i)?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),s=47===e.charCodeAt(e.length-1);return(0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&s&&(e+="/"),n)?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var s=arguments[r];t(s),s.length>0&&(void 0===e?e=s:e+="/"+s)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r||(e=n.resolve(e))===(r=n.resolve(r)))return"";for(var s=1;s<e.length&&47===e.charCodeAt(s);++s);for(var i=e.length,a=i-s,o=1;o<r.length&&47===r.charCodeAt(o);++o);for(var l=r.length-o,u=a<l?a:l,c=-1,h=0;h<=u;++h){if(h===u){if(l>u){if(47===r.charCodeAt(o+h))return r.slice(o+h+1);if(0===h)return r.slice(o+h)}else a>u&&(47===e.charCodeAt(s+h)?c=h:0===h&&(c=0));break}var d=e.charCodeAt(s+h);if(d!==r.charCodeAt(o+h))break;47===d&&(c=h)}var f="";for(h=s+c+1;h<=i;++h)(h===i||47===e.charCodeAt(h))&&(0===f.length?f+="..":f+="/..");return f.length>0?f+r.slice(o+c):(o+=c,47===r.charCodeAt(o)&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,s=-1,i=!0,a=e.length-1;a>=1;--a)if(47===(r=e.charCodeAt(a))){if(!i){s=a;break}}else i=!1;return -1===s?n?"/":".":n&&1===s?"//":e.slice(0,s)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw TypeError('"ext" argument must be a string');t(e);var n,s=0,i=-1,a=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var o=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!a){s=n+1;break}}else -1===l&&(a=!1,l=n+1),o>=0&&(u===r.charCodeAt(o)?-1==--o&&(i=n):(o=-1,i=l))}return s===i?i=l:-1===i&&(i=e.length),e.slice(s,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!a){s=n+1;break}}else -1===i&&(a=!1,i=n+1);return -1===i?"":e.slice(s,i)},extname:function(e){t(e);for(var r=-1,n=0,s=-1,i=!0,a=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(47===l){if(!i){n=o+1;break}continue}-1===s&&(i=!1,s=o+1),46===l?-1===r?r=o:1!==a&&(a=1):-1!==r&&(a=-1)}return -1===r||-1===s||0===a||1===a&&r===s-1&&r===n+1?"":e.slice(r,s)},format:function(e){var t,r;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+r:t+"/"+r:r},parse:function(e){t(e);var r,n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var s=e.charCodeAt(0),i=47===s;i?(n.root="/",r=1):r=0;for(var a=-1,o=0,l=-1,u=!0,c=e.length-1,h=0;c>=r;--c){if(47===(s=e.charCodeAt(c))){if(!u){o=c+1;break}continue}-1===l&&(u=!1,l=c+1),46===s?-1===a?a=c:1!==h&&(h=1):-1!==a&&(h=-1)}return -1===a||-1===l||0===h||1===h&&a===l-1&&a===o+1?-1!==l&&(0===o&&i?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(o,l)):(0===o&&i?(n.name=e.slice(1,a),n.base=e.slice(1,l)):(n.name=e.slice(o,a),n.base=e.slice(o,l)),n.ext=e.slice(a,l)),o>0?n.dir=e.slice(0,o-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var i=r[e]={exports:{}},a=!0;try{t[e](i,i.exports,n),a=!1}finally{a&&delete r[e]}return i.exports}n.ab="//";var s=n(114);e.exports=s}()},548:(e,t)=>{"use strict";function r(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"===n||"+"===n||"?"===n){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===n){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===n){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===n){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===n){for(var s="",i=r+1;i<e.length;){var a=e.charCodeAt(i);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||95===a){s+=e[i++];continue}break}if(!s)throw TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:s}),r=i;continue}if("("===n){var o=1,l="",i=r+1;if("?"===e[i])throw TypeError('Pattern cannot start with "?" at '+i);for(;i<e.length;){if("\\"===e[i]){l+=e[i++]+e[i++];continue}if(")"===e[i]){if(0==--o){i++;break}}else if("("===e[i]&&(o++,"?"!==e[i+1]))throw TypeError("Capturing groups are not allowed at "+i);l+=e[i++]}if(o)throw TypeError("Unbalanced pattern at "+r);if(!l)throw TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:l}),r=i;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),s=t.prefixes,i=void 0===s?"./":s,a="[^"+n(t.delimiter||"/#?")+"]+?",o=[],l=0,u=0,c="",h=function(e){if(u<r.length&&r[u].type===e)return r[u++].value},d=function(e){var t=h(e);if(void 0!==t)return t;var n=r[u];throw TypeError("Unexpected "+n.type+" at "+n.index+", expected "+e)},f=function(){for(var e,t="";e=h("CHAR")||h("ESCAPED_CHAR");)t+=e;return t};u<r.length;){var p=h("CHAR"),g=h("NAME"),m=h("PATTERN");if(g||m){var y=p||"";-1===i.indexOf(y)&&(c+=y,y=""),c&&(o.push(c),c=""),o.push({name:g||l++,prefix:y,suffix:"",pattern:m||a,modifier:h("MODIFIER")||""});continue}var v=p||h("ESCAPED_CHAR");if(v){c+=v;continue}if(c&&(o.push(c),c=""),h("OPEN")){var y=f(),w=h("NAME")||"",b=h("PATTERN")||"",_=f();d("CLOSE"),o.push({name:w||(b?l++:""),pattern:w&&!b?a:b,prefix:y,suffix:_,modifier:h("MODIFIER")||""});continue}d("END")}return o}function n(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function s(e){return e&&e.sensitive?"":"i"}t.MY=function(e,t){var n,i,a,o,l,u,c,h;return n=r(e,t),void 0===(i=t)&&(i={}),a=s(i),l=void 0===(o=i.encode)?function(e){return e}:o,c=void 0===(u=i.validate)||u,h=n.map(function(e){if("object"==typeof e)return RegExp("^(?:"+e.pattern+")$",a)}),function(e){for(var t="",r=0;r<n.length;r++){var s=n[r];if("string"==typeof s){t+=s;continue}var i=e?e[s.name]:void 0,a="?"===s.modifier||"*"===s.modifier,o="*"===s.modifier||"+"===s.modifier;if(Array.isArray(i)){if(!o)throw TypeError('Expected "'+s.name+'" to not repeat, but got an array');if(0===i.length){if(a)continue;throw TypeError('Expected "'+s.name+'" to not be empty')}for(var u=0;u<i.length;u++){var d=l(i[u],s);if(c&&!h[r].test(d))throw TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but got "'+d+'"');t+=s.prefix+d+s.suffix}continue}if("string"==typeof i||"number"==typeof i){var d=l(String(i),s);if(c&&!h[r].test(d))throw TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+d+'"');t+=s.prefix+d+s.suffix;continue}if(!a){var f=o?"an array":"a string";throw TypeError('Expected "'+s.name+'" to be '+f)}}return t}},t.WS=function(e,t,r){void 0===r&&(r={});var n=r.decode,s=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var i=n[0],a=n.index,o=Object.create(null),l=1;l<n.length;l++)!function(e){if(void 0!==n[e]){var r=t[e-1];"*"===r.modifier||"+"===r.modifier?o[r.name]=n[e].split(r.prefix+r.suffix).map(function(e){return s(e,r)}):o[r.name]=s(n[e],r)}}(l);return{path:i,index:a,params:o}}},t.Bo=function e(t,i,a){return t instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}(t,i):Array.isArray(t)?RegExp("(?:"+t.map(function(t){return e(t,i,a).source}).join("|")+")",s(a)):function(e,t,r){void 0===r&&(r={});for(var i=r.strict,a=void 0!==i&&i,o=r.start,l=r.end,u=r.encode,c=void 0===u?function(e){return e}:u,h="["+n(r.endsWith||"")+"]|$",d="["+n(r.delimiter||"/#?")+"]",f=void 0===o||o?"^":"",p=0;p<e.length;p++){var g=e[p];if("string"==typeof g)f+=n(c(g));else{var m=n(c(g.prefix)),y=n(c(g.suffix));if(g.pattern){if(t&&t.push(g),m||y){if("+"===g.modifier||"*"===g.modifier){var v="*"===g.modifier?"?":"";f+="(?:"+m+"((?:"+g.pattern+")(?:"+y+m+"(?:"+g.pattern+"))*)"+y+")"+v}else f+="(?:"+m+"("+g.pattern+")"+y+")"+g.modifier}else f+="("+g.pattern+")"+g.modifier}else f+="(?:"+m+y+")"+g.modifier}}if(void 0===l||l)a||(f+=d+"?"),f+=r.endsWith?"(?="+h+")":"$";else{var w=e[e.length-1],b="string"==typeof w?d.indexOf(w[w.length-1])>-1:void 0===w;a||(f+="(?:"+d+"(?="+h+"))?"),b||(f+="(?="+d+"|"+h+")")}return new RegExp(f,s(r))}(r(t,a),i,a)}},28:e=>{!function(){"use strict";var t={815:function(e){e.exports=function(e,r,n,s){r=r||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(r);var o=1e3;s&&"number"==typeof s.maxKeys&&(o=s.maxKeys);var l=e.length;o>0&&l>o&&(l=o);for(var u=0;u<l;++u){var c,h,d,f,p=e[u].replace(a,"%20"),g=p.indexOf(n);(g>=0?(c=p.substr(0,g),h=p.substr(g+1)):(c=p,h=""),d=decodeURIComponent(c),f=decodeURIComponent(h),Object.prototype.hasOwnProperty.call(i,d))?t(i[d])?i[d].push(f):i[d]=[i[d],f]:i[d]=f}return i};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},577:function(e){var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,i,a,o){return(i=i||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e)?n(s(e),function(s){var o=encodeURIComponent(t(s))+a;return r(e[s])?n(e[s],function(e){return o+encodeURIComponent(t(e))}).join(i):o+encodeURIComponent(t(e[s]))}).join(i):o?encodeURIComponent(t(o))+a+encodeURIComponent(t(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var i=r[e]={exports:{}},a=!0;try{t[e](i,i.exports,n),a=!1}finally{a&&delete r[e]}return i.exports}n.ab="//";var s={};s.decode=s.parse=n(815),s.encode=s.stringify=n(577),e.exports=s}()},642:(e,t)=>{"use strict";var r={usingClientEntryPoint:!1,Events:null,Dispatcher:{current:null}};function n(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}var s=r.Dispatcher;t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r,t.preconnect=function(e,t){var r=s.current;r&&"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,r.preconnect(e,t))},t.prefetchDNS=function(e){var t=s.current;t&&"string"==typeof e&&t.prefetchDNS(e)},t.preinit=function(e,t){var r=s.current;if(r&&"string"==typeof e&&t&&"string"==typeof t.as){var i=t.as,a=n(i,t.crossOrigin),o="string"==typeof t.integrity?t.integrity:void 0,l="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===i?r.preinitStyle(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:a,integrity:o,fetchPriority:l}):"script"===i&&r.preinitScript(e,{crossOrigin:a,integrity:o,fetchPriority:l,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){var r=s.current;if(r&&"string"==typeof e){if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var i=n(t.as,t.crossOrigin);r.preinitModuleScript(e,{crossOrigin:i,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.preinitModuleScript(e)}},t.preload=function(e,t){var r=s.current;if(r&&"string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var i=t.as,a=n(i,t.crossOrigin);r.preload(e,i,{crossOrigin:a,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0})}},t.preloadModule=function(e,t){var r=s.current;if(r&&"string"==typeof e){if(t){var i=n(t.as,t.crossOrigin);r.preloadModule(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:i,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.preloadModule(e)}}},105:(e,t,r)=>{"use strict";e.exports=r(642)},651:(e,t,r)=>{"use strict";var n=r(908),s=r(105),i=null,a=0;function o(e,t){if(0!==t.byteLength){if(2048<t.byteLength)0<a&&(e.enqueue(new Uint8Array(i.buffer,0,a)),i=new Uint8Array(2048),a=0),e.enqueue(t);else{var r=i.length-a;r<t.byteLength&&(0===r?e.enqueue(i):(i.set(t.subarray(0,r),a),e.enqueue(i),t=t.subarray(r)),i=new Uint8Array(2048),a=0),i.set(t,a),a+=t.byteLength}}return!0}var l=new TextEncoder,u=Symbol.for("react.client.reference"),c=Symbol.for("react.server.reference");function h(e,t,r){return Object.defineProperties(e,{$$typeof:{value:u},$$id:{value:t},$$async:{value:r}})}var d=Function.prototype.bind,f=Array.prototype.slice;function p(){var e=d.apply(this,arguments);if(this.$$typeof===c){var t=f.call(arguments,1);return Object.defineProperties(e,{$$typeof:{value:c},$$id:{value:this.$$id},$$bound:{value:this.$$bound?this.$$bound.concat(t):t},bind:{value:p}})}return e}var g=Promise.prototype,m={get:function(e,t){switch(t){case"$$typeof":return e.$$typeof;case"$$id":return e.$$id;case"$$async":return e.$$async;case"name":return e.name;case"displayName":case"defaultProps":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case Symbol.toStringTag:return Object.prototype[Symbol.toStringTag];case"Provider":throw Error("Cannot render a Client Context Provider on the Server. Instead, you can export a Client Component wrapper that itself renders a Client Context Provider.")}throw Error("Cannot access "+String(e.name)+"."+String(t)+" on the server. You cannot dot into a client module from a server component. You can only pass the imported name through.")},set:function(){throw Error("Cannot assign to a client module from a server module.")}};function y(e,t){switch(t){case"$$typeof":return e.$$typeof;case"$$id":return e.$$id;case"$$async":return e.$$async;case"name":return e.name;case"defaultProps":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case Symbol.toStringTag:return Object.prototype[Symbol.toStringTag];case"__esModule":var r=e.$$id;return e.default=h(function(){throw Error("Attempted to call the default export of "+r+" from the server but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},e.$$id+"#",e.$$async),!0;case"then":if(e.then)return e.then;if(e.$$async)return;var n=h({},e.$$id,!0),s=new Proxy(n,v);return e.status="fulfilled",e.value=s,e.then=h(function(e){return Promise.resolve(e(s))},e.$$id+"#then",!1)}if("symbol"==typeof t)throw Error("Cannot read Symbol exports. Only named exports are supported on a client module imported on the server.");return(n=e[t])||(Object.defineProperty(n=h(function(){throw Error("Attempted to call "+String(t)+"() from the server but "+String(t)+" is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},e.$$id+"#"+t,e.$$async),"name",{value:t}),n=e[t]=new Proxy(n,m)),n}var v={get:function(e,t){return y(e,t)},getOwnPropertyDescriptor:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return r||(r={value:y(e,t),writable:!1,configurable:!1,enumerable:!1},Object.defineProperty(e,t,r)),r},getPrototypeOf:function(){return g},set:function(){throw Error("Cannot assign to a client module from a server module.")}};s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher;var w="function"==typeof AsyncLocalStorage,b=w?new AsyncLocalStorage:null;"object"==typeof async_hooks&&async_hooks.createHook,"object"==typeof async_hooks&&async_hooks.executionAsyncId;var _=Symbol.for("react.element"),x=Symbol.for("react.fragment"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),O=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.postpone");var T=Symbol.iterator,k=Error("Suspense Exception: This is not a real error! It's an implementation detail of `use` to interrupt the current render. You must either rethrow it immediately, or move the `use` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary, or call the promise's `.catch` method and pass the result to `use`");function $(){}var I=null;function N(){if(null===I)throw Error("Expected a suspended thenable. This is a bug in React. Please file an issue.");var e=I;return I=null,e}var j=null,M=0,D=null;function L(){var e=D||[];return D=null,e}var U={useMemo:function(e){return e()},useCallback:function(e){return e},useDebugValue:function(){},useDeferredValue:q,useTransition:q,readContext:F,useContext:F,useReducer:q,useRef:q,useState:q,useInsertionEffect:q,useLayoutEffect:q,useImperativeHandle:q,useEffect:q,useId:function(){if(null===j)throw Error("useId can only be used while React is rendering");var e=j.identifierCount++;return":"+j.identifierPrefix+"S"+e.toString(32)+":"},useSyncExternalStore:q,useCacheRefresh:function(){return H},useMemoCache:function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=O;return t},use:function(e){if(null!==e&&"object"==typeof e||"function"==typeof e){if("function"==typeof e.then){var t=M;return M+=1,null===D&&(D=[]),function(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then($,$),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:if("string"!=typeof t.status)switch((e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}}),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}throw I=t,k}}(D,e,t)}e.$$typeof===S&&F()}if(e.$$typeof===u){if(null!=e.value&&e.value.$$typeof===S)throw Error("Cannot read a Client Context from a Server Component.");throw Error("Cannot use() an already resolved Client Reference.")}throw Error("An unsupported type was passed to use(): "+String(e))}};function q(){throw Error("This Hook is not supported in Server Components.")}function H(){throw Error("Refreshing the cache is not supported in Server Components.")}function F(){throw Error("Cannot read a Client Context from a Server Component.")}var B=Array.isArray,W=Object.getPrototypeOf;function J(e){return Object.prototype.toString.call(e).replace(/^\[object (.*)\]$/,function(e,t){return t})}function V(e){switch(typeof e){case"string":return JSON.stringify(10>=e.length?e:e.slice(0,10)+"...");case"object":if(B(e))return"[...]";if(null!==e&&e.$$typeof===X)return"client";return"Object"===(e=J(e))?"{...}":e;case"function":return e.$$typeof===X?"client":(e=e.displayName||e.name)?"function "+e:"function";default:return String(e)}}var X=Symbol.for("react.client.reference");function G(e,t){var r=J(e);if("Object"!==r&&"Array"!==r)return r;r=-1;var n=0;if(B(e)){for(var s="[",i=0;i<e.length;i++){0<i&&(s+=", ");var a=e[i];a="object"==typeof a&&null!==a?G(a):V(a),""+i===t?(r=s.length,n=a.length,s+=a):s=10>a.length&&40>s.length+a.length?s+a:s+"..."}s+="]"}else if(e.$$typeof===_)s="<"+function e(t){if("string"==typeof t)return t;switch(t){case C:return"Suspense";case R:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case E:return e(t.render);case A:return e(t.type);case P:var r=t._payload;t=t._init;try{return e(t(r))}catch(e){}}return""}(e.type)+"/>";else{if(e.$$typeof===X)return"client";for(a=0,s="{",i=Object.keys(e);a<i.length;a++){0<a&&(s+=", ");var o=i[a],l=JSON.stringify(o);s+=('"'+o+'"'===l?o:l)+": ",l="object"==typeof(l=e[o])&&null!==l?G(l):V(l),o===t?(r=s.length,n=l.length,s+=l):s=10>l.length&&40>s.length+l.length?s+l:s+"..."}s+="}"}return void 0===t?s:-1<r&&0<n?"\n  "+s+"\n  "+(e=" ".repeat(r)+"^".repeat(n)):"\n  "+s}var z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=n.__SECRET_SERVER_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;if(!K)throw Error('The "react" package in this environment is not configured correctly. The "react-server" condition must be enabled in any environment that runs React Server Components.');var Y=Object.prototype,Q=JSON.stringify,Z=(K.ReactCurrentCache,z.ReactCurrentDispatcher),ee=null;function et(e){if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e}function er(e,t,r,n,s){var i=t.thenableState;if(t.thenableState=null,M=0,D=i,"object"==typeof(n=n(s,void 0))&&null!==n&&"function"==typeof n.then){if("fulfilled"===(s=n).status)return s.value;n=function(e){switch(e.status){case"fulfilled":case"rejected":break;default:"string"!=typeof e.status&&(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))}return{$$typeof:P,_payload:e,_init:et}}(n)}return s=t.keyPath,i=t.implicitSlot,null!==r?t.keyPath=null===s?r:s+","+r:null===s&&(t.implicitSlot=!0),e=eu(e,t,ed,"",n),t.keyPath=s,t.implicitSlot=i,e}function en(e,t){var r=e.pingedTasks;r.push(t),1===r.length&&(e.flushScheduled=null!==e.destination,setTimeout(function(){return function(e){var t=Z.current;Z.current=U;var r=ee;j=ee=e;try{var n=e.pingedTasks;e.pingedTasks=[];for(var s=0;s<n.length;s++)ef(e,n[s]);null!==e.destination&&ep(e,e.destination)}catch(t){ec(e,t),function(e,t){var r;null!==e.destination?(e.status=2,"function"==typeof(r=e.destination).error?r.error(t):r.close()):(e.status=1,e.fatalError=t)}(e,t)}finally{Z.current=t,j=null,ee=r}}(e)},0))}function es(e,t,r,n,s){e.pendingChunks++;var i=e.nextChunkId++;"object"==typeof t&&null!==t&&e.writtenObjects.set(t,i);var a={id:i,status:0,model:t,keyPath:r,implicitSlot:n,ping:function(){return en(e,a)},toJSON:function(t,r){var n=a.keyPath,s=a.implicitSlot;try{var i=eu(e,a,this,t,r)}catch(l){if(t=l===k?N():l,r="object"==typeof(r=a.model)&&null!==r&&(r.$$typeof===_||r.$$typeof===P),"object"==typeof t&&null!==t&&"function"==typeof t.then){var o=(i=es(e,a.model,a.keyPath,a.implicitSlot,e.abortableTasks)).ping;t.then(o,o),i.thenableState=L(),a.keyPath=n,a.implicitSlot=s,i=r?"$L"+i.id.toString(16):ei(i.id)}else if(a.keyPath=n,a.implicitSlot=s,r)e.pendingChunks++,n=e.nextChunkId++,s=ec(e,t),eh(e,n,s),i="$L"+n.toString(16);else throw t}return i},thenableState:null};return s.add(a),a}function ei(e){return"$"+e.toString(16)}function ea(e,t,r,n){var s=n.$$async?n.$$id+"#async":n.$$id,i=e.writtenClientReferences,a=i.get(s);if(void 0!==a)return t[0]===_&&"1"===r?"$L"+a.toString(16):ei(a);try{var o=e.bundlerConfig,u=n.$$id;a="";var c=o[u];if(c)a=c.name;else{var h=u.lastIndexOf("#");if(-1!==h&&(a=u.slice(h+1),c=o[u.slice(0,h)]),!c)throw Error('Could not find the module "'+u+'" in the React Client Manifest. This is probably a bug in the React Server Components bundler.')}var d=!0===n.$$async?[c.id,c.chunks,a,1]:[c.id,c.chunks,a];e.pendingChunks++;var f=e.nextChunkId++,p=Q(d),g=f.toString(16)+":I"+p+"\n",m=l.encode(g);return e.completedImportChunks.push(m),i.set(s,f),t[0]===_&&"1"===r?"$L"+f.toString(16):ei(f)}catch(n){return e.pendingChunks++,t=e.nextChunkId++,r=ec(e,n),eh(e,t,r),ei(t)}}function eo(e,t){return t=es(e,t,null,!1,e.abortableTasks),ef(e,t),t.id}var el=!1;function eu(e,t,r,n,s){if(t.model=s,s===_)return"$";if(null===s)return null;if("object"==typeof s){switch(s.$$typeof){case _:if(void 0!==(n=(r=e.writtenObjects).get(s))){if(el!==s)return -1===n?ei(e=eo(e,s)):ei(n);el=null}else r.set(s,-1);return function e(t,r,n,s,i,a){if(null!=i)throw Error("Refs cannot be used in Server Components, nor passed to Client Components.");if("function"==typeof n)return n.$$typeof===u?[_,n,s,a]:er(t,r,s,n,a);if("string"==typeof n)return[_,n,s,a];if("symbol"==typeof n)return n===x&&null===s?(s=r.implicitSlot,null===r.keyPath&&(r.implicitSlot=!0),t=eu(t,r,ed,"",a.children),r.implicitSlot=s,t):[_,n,s,a];if(null!=n&&"object"==typeof n){if(n.$$typeof===u)return[_,n,s,a];switch(n.$$typeof){case P:return e(t,r,n=(0,n._init)(n._payload),s,i,a);case E:return er(t,r,s,n.render,a);case A:return e(t,r,n.type,s,i,a)}}throw Error("Unsupported Server Component type: "+V(n))}(e,t,s.type,s.key,s.ref,s.props);case P:return t.thenableState=null,eu(e,t,ed,"",s=(r=s._init)(s._payload))}if(s.$$typeof===u)return ea(e,r,n,s);if(n=(r=e.writtenObjects).get(s),"function"==typeof s.then){if(void 0!==n){if(el!==s)return"$@"+n.toString(16);el=null}return e=function(e,t,r){var n=es(e,null,t.keyPath,t.implicitSlot,e.abortableTasks);switch(r.status){case"fulfilled":return n.model=r.value,en(e,n),n.id;case"rejected":return t=ec(e,r.reason),eh(e,n.id,t),n.id;default:"string"!=typeof r.status&&(r.status="pending",r.then(function(e){"pending"===r.status&&(r.status="fulfilled",r.value=e)},function(e){"pending"===r.status&&(r.status="rejected",r.reason=e)}))}return r.then(function(t){n.model=t,en(e,n)},function(t){n.status=4,t=ec(e,t),eh(e,n.id,t),e.abortableTasks.delete(n),null!==e.destination&&ep(e,e.destination)}),n.id}(e,t,s),r.set(s,e),"$@"+e.toString(16)}if(void 0!==n){if(el!==s)return -1===n?ei(e=eo(e,s)):ei(n);el=null}else r.set(s,-1);if(B(s))return s;if(s instanceof Map){for(t=0,s=Array.from(s);t<s.length;t++)"object"==typeof(r=s[t][0])&&null!==r&&void 0===(n=e.writtenObjects).get(r)&&n.set(r,-1);return"$Q"+eo(e,s).toString(16)}if(s instanceof Set){for(t=0,s=Array.from(s);t<s.length;t++)"object"==typeof(r=s[t])&&null!==r&&void 0===(n=e.writtenObjects).get(r)&&n.set(r,-1);return"$W"+eo(e,s).toString(16)}if(e=null===s||"object"!=typeof s?null:"function"==typeof(e=T&&s[T]||s["@@iterator"])?e:null)return e=Array.from(s);if((e=W(s))!==Y&&(null===e||null!==W(e)))throw Error("Only plain objects, and a few built-ins, can be passed to Client Components from Server Components. Classes or null prototypes are not supported.");return s}if("string"==typeof s)return"Z"===s[s.length-1]&&r[n]instanceof Date?"$D"+s:1024<=s.length?(e.pendingChunks+=2,t=e.nextChunkId++,r=(s=l.encode(s)).byteLength,r=t.toString(16)+":T"+r.toString(16)+",",r=l.encode(r),e.completedRegularChunks.push(r,s),ei(t)):e="$"===s[0]?"$"+s:s;if("boolean"==typeof s)return s;if("number"==typeof s)return Number.isFinite(s)?0===s&&-1/0==1/s?"$-0":s:1/0===s?"$Infinity":-1/0===s?"$-Infinity":"$NaN";if(void 0===s)return"$undefined";if("function"==typeof s){if(s.$$typeof===u)return ea(e,r,n,s);if(s.$$typeof===c)return void 0!==(r=(t=e.writtenServerReferences).get(s))?e="$F"+r.toString(16):(r=s.$$bound,e=eo(e,r={id:s.$$id,bound:r?Promise.resolve(r):null}),t.set(s,e),e="$F"+e.toString(16)),e;if(/^on[A-Z]/.test(n))throw Error("Event handlers cannot be passed to Client Component props."+G(r,n)+"\nIf you need interactivity, consider converting part of this to a Client Component.");throw Error('Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with "use server". Or maybe you meant to call this function rather than return it.'+G(r,n))}if("symbol"==typeof s){var i,a,o=(t=e.writtenSymbols).get(s);if(void 0!==o)return ei(o);if(Symbol.for(o=s.description)!==s)throw Error("Only global symbols received from Symbol.for(...) can be passed to Client Components. The symbol Symbol.for("+s.description+") cannot be found among global symbols."+G(r,n));return e.pendingChunks++,r=e.nextChunkId++,i=e,a=r,i=Q("$S"+o),a=a.toString(16)+":"+i+"\n",n=l.encode(a),e.completedImportChunks.push(n),t.set(s,r),ei(r)}if("bigint"==typeof s)return"$n"+s.toString(10);throw Error("Type "+typeof s+" is not supported in Client Component props."+G(r,n))}function ec(e,t){var r=ee;ee=null;try{var n=e.onError,s=w?b.run(void 0,n,t):n(t)}finally{ee=r}if(null!=s&&"string"!=typeof s)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof s+'" instead');return s||""}function eh(e,t,r){r={digest:r},t=t.toString(16)+":E"+Q(r)+"\n",t=l.encode(t),e.completedErrorChunks.push(t)}var ed={};function ef(e,t){if(0===t.status)try{el=t.model;var r=eu(e,t,ed,"",t.model);el=r,t.keyPath=null,t.implicitSlot=!1;var n="object"==typeof r&&null!==r?Q(r,t.toJSON):Q(r),s=t.id.toString(16)+":"+n+"\n",i=l.encode(s);e.completedRegularChunks.push(i),e.abortableTasks.delete(t),t.status=1}catch(r){var a=r===k?N():r;if("object"==typeof a&&null!==a&&"function"==typeof a.then){var o=t.ping;a.then(o,o),t.thenableState=L()}else{e.abortableTasks.delete(t),t.status=4;var u=ec(e,a);eh(e,t.id,u)}}finally{}}function ep(e,t){i=new Uint8Array(2048),a=0;try{for(var r=e.completedImportChunks,n=0;n<r.length;n++)e.pendingChunks--,o(t,r[n]);r.splice(0,n);var s=e.completedHintChunks;for(n=0;n<s.length;n++)o(t,s[n]);s.splice(0,n);var l=e.completedRegularChunks;for(n=0;n<l.length;n++)e.pendingChunks--,o(t,l[n]);l.splice(0,n);var u=e.completedErrorChunks;for(n=0;n<u.length;n++)e.pendingChunks--,o(t,u[n]);u.splice(0,n)}finally{e.flushScheduled=!1,i&&0<a&&(t.enqueue(new Uint8Array(i.buffer,0,a)),i=null,a=0)}0===e.pendingChunks&&t.close()}var eg=new Map;function em(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}function ey(){}function ev(e,t,r,n){this.status=e,this.value=t,this.reason=r,this._response=n}function ew(e,t){for(var r=0;r<e.length;r++)(0,e[r])(t)}ev.prototype=Object.create(Promise.prototype),ev.prototype.then=function(e,t){switch("resolved_model"===this.status&&ex(this),this.status){case"fulfilled":e(this.value);break;case"pending":case"blocked":e&&(null===this.value&&(this.value=[]),this.value.push(e)),t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:t(this.reason)}};var eb=null,e_=null;function ex(e){var t=eb,r=e_;eb=e,e_=null;try{var n=JSON.parse(e.value,e._response._fromJSON);null!==e_&&0<e_.deps?(e_.value=n,e.status="blocked",e.value=null,e.reason=null):(e.status="fulfilled",e.value=n)}catch(t){e.status="rejected",e.reason=t}finally{eb=t,e_=r}}t.createClientModuleProxy=function(e){return new Proxy(e=h({},e,!1),v)}},796:(e,t,r)=>{"use strict";e.exports=r(651)},949:(e,t)=>{"use strict";var r=Object.assign,n={current:null};function s(){return new Map}if("function"==typeof fetch){var i=fetch,a=function(e,t){var r=n.current;if(!r||t&&t.signal&&t.signal!==r.getCacheSignal())return i(e,t);if("string"!=typeof e||t){var a="string"==typeof e||e instanceof URL?new Request(e,t):e;if("GET"!==a.method&&"HEAD"!==a.method||a.keepalive)return i(e,t);var o=JSON.stringify([a.method,Array.from(a.headers.entries()),a.mode,a.redirect,a.credentials,a.referrer,a.referrerPolicy,a.integrity]);a=a.url}else o='["GET",[],null,"follow",null,null,null,null]',a=e;var l=r.getCacheForType(s);if(void 0===(r=l.get(a)))e=i(e,t),l.set(a,[o,e]);else{for(a=0,l=r.length;a<l;a+=2){var u=r[a+1];if(r[a]===o)return(e=u).then(function(e){return e.clone()})}e=i(e,t),r.push(o,e)}return e.then(function(e){return e.clone()})};r(a,i);try{fetch=a}catch(e){try{globalThis.fetch=a}catch(e){console.warn("React was unable to patch the fetch() function in this environment. Suspensey APIs might not work correctly as a result.")}}}var o={current:null},l={ReactCurrentDispatcher:o,ReactCurrentOwner:{current:null}};function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=Array.isArray,h=Symbol.for("react.element"),d=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.iterator,_=Object.prototype.hasOwnProperty,x=l.ReactCurrentOwner;function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===h}var E=/\/+/g;function C(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function R(){}function A(e,t,r){if(null==e)return e;var n=[],s=0;return!function e(t,r,n,s,i){var a,o,l,f=typeof t;("undefined"===f||"boolean"===f)&&(t=null);var p=!1;if(null===t)p=!0;else switch(f){case"string":case"number":p=!0;break;case"object":switch(t.$$typeof){case h:case d:p=!0;break;case w:return e((p=t._init)(t._payload),r,n,s,i)}}if(p)return i=i(t),p=""===s?"."+C(t,0):s,c(i)?(n="",null!=p&&(n=p.replace(E,"$&/")+"/"),e(i,r,n,"",function(e){return e})):null!=i&&(S(i)&&(a=i,o=n+(!i.key||t&&t.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+p,i={$$typeof:h,type:a.type,key:o,ref:a.ref,props:a.props,_owner:a._owner}),r.push(i)),1;p=0;var g=""===s?".":s+":";if(c(t))for(var m=0;m<t.length;m++)f=g+C(s=t[m],m),p+=e(s,r,n,f,i);else if("function"==typeof(m=null===(l=t)||"object"!=typeof l?null:"function"==typeof(l=b&&l[b]||l["@@iterator"])?l:null))for(t=m.call(t),m=0;!(s=t.next()).done;)f=g+C(s=s.value,m++),p+=e(s,r,n,f,i);else if("object"===f){if("function"==typeof t.then)return e(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(R,R):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),r,n,s,i);throw Error(u(31,"[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r))}return p}(e,n,"","",function(e){return t.call(r,e,s++)}),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}function O(){return new WeakMap}function T(){return{s:0,v:void 0,o:null,p:null}}var k={transition:null};function $(){}var I="function"==typeof reportError?reportError:function(e){console.error(e)};t.Children={map:A,forEach:function(e,t,r){A(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error(u(143));return e}},t.Fragment=f,t.Profiler=g,t.StrictMode=p,t.Suspense=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l,t.__SECRET_SERVER_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentCache:n},t.cache=function(e){return function(){var t=n.current;if(!t)return e.apply(null,arguments);var r=t.getCacheForType(O);void 0===(t=r.get(e))&&(t=T(),r.set(e,t)),r=0;for(var s=arguments.length;r<s;r++){var i=arguments[r];if("function"==typeof i||"object"==typeof i&&null!==i){var a=t.o;null===a&&(t.o=a=new WeakMap),void 0===(t=a.get(i))&&(t=T(),a.set(i,t))}else null===(a=t.p)&&(t.p=a=new Map),void 0===(t=a.get(i))&&(t=T(),a.set(i,t))}if(1===t.s)return t.v;if(2===t.s)throw t.v;try{var o=e.apply(null,arguments);return(r=t).s=1,r.v=o}catch(e){throw(o=t).s=2,o.v=e,e}}},t.cloneElement=function(e,t,n){if(null==e)throw Error(u(267,e));var s=r({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=x.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&"key"!==c&&"ref"!==c&&"__self"!==c&&"__source"!==c&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:h,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createElement=function(e,t,r){var n,s={},i=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)_.call(t,n)&&"key"!==n&&"ref"!==n&&"__self"!==n&&"__source"!==n&&(s[n]=t[n]);var o=arguments.length-2;if(1===o)s.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===s[n]&&(s[n]=o[n]);return{$$typeof:h,type:e,key:i,ref:a,props:s,_owner:x.current}},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:m,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:w,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition,r=new Set;k.transition={_callbacks:r};var n=k.transition;try{var s=e();"object"==typeof s&&null!==s&&"function"==typeof s.then&&(r.forEach(function(e){return e(n,s)}),s.then($,I))}catch(e){I(e)}finally{k.transition=t}},t.use=function(e){return o.current.use(e)},t.useCallback=function(e,t){return o.current.useCallback(e,t)},t.useDebugValue=function(){},t.useId=function(){return o.current.useId()},t.useMemo=function(e,t){return o.current.useMemo(e,t)},t.version="18.3.0-canary-14898b6a9-20240318"},908:(e,t,r)=>{"use strict";e.exports=r(949)},583:(e,t,r)=>{"use strict";var n;r.d(t,{ZK:()=>y});let{env:s,stdout:i}=(null==(n=globalThis)?void 0:n.process)??{},a=s&&!s.NO_COLOR&&(s.FORCE_COLOR||(null==i?void 0:i.isTTY)&&!s.CI&&"dumb"!==s.TERM),o=(e,t,r,n)=>{let s=e.substring(0,n)+r,i=e.substring(n+t.length),a=i.indexOf(t);return~a?s+o(i,t,r,a):s+i},l=(e,t,r=e)=>a?n=>{let s=""+n,i=s.indexOf(t,e.length);return~i?e+o(s,t,r,i)+t:e+s+t}:String,u=l("\x1b[1m","\x1b[22m","\x1b[22m\x1b[1m");l("\x1b[2m","\x1b[22m","\x1b[22m\x1b[2m"),l("\x1b[3m","\x1b[23m"),l("\x1b[4m","\x1b[24m"),l("\x1b[7m","\x1b[27m"),l("\x1b[8m","\x1b[28m"),l("\x1b[9m","\x1b[29m"),l("\x1b[30m","\x1b[39m");let c=l("\x1b[31m","\x1b[39m"),h=l("\x1b[32m","\x1b[39m"),d=l("\x1b[33m","\x1b[39m");l("\x1b[34m","\x1b[39m");let f=l("\x1b[35m","\x1b[39m");l("\x1b[38;2;173;127;168m","\x1b[39m"),l("\x1b[36m","\x1b[39m");let p=l("\x1b[37m","\x1b[39m");l("\x1b[90m","\x1b[39m"),l("\x1b[40m","\x1b[49m"),l("\x1b[41m","\x1b[49m"),l("\x1b[42m","\x1b[49m"),l("\x1b[43m","\x1b[49m"),l("\x1b[44m","\x1b[49m"),l("\x1b[45m","\x1b[49m"),l("\x1b[46m","\x1b[49m"),l("\x1b[47m","\x1b[49m");let g={wait:p(u("○")),error:c(u("⨯")),warn:d(u("⚠")),ready:"▲",info:p(u(" ")),event:h(u("✓")),trace:f(u("\xbb"))},m={log:"log",warn:"warn",error:"error"};function y(...e){!function(e,...t){(""===t[0]||void 0===t[0])&&1===t.length&&t.shift();let r=e in m?m[e]:"log",n=g[e];0===t.length?console[r](""):console[r](" "+n,...t)}("warn",...e)}},39:(e,t,r)=>{"use strict";r.d(t,{H4:()=>i,om:()=>n,vu:()=>s});let n="Next-Action",s=[["RSC"],["Next-Router-State-Tree"],["Next-Router-Prefetch"]],i="_rsc"},363:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DynamicServerError:()=>s,isDynamicServerError:()=>i});let n="DYNAMIC_SERVER_USAGE";class s extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=n}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===n}},439:(e,t,r)=>{"use strict";r.d(t,{G:()=>n});class n extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}},927:(e,t,r)=>{"use strict";r.d(t,{Ar:()=>h,BR:()=>y,EX:()=>u,Et:()=>c,Ho:()=>g,JT:()=>l,Qq:()=>i,Sx:()=>a,X_:()=>f,cv:()=>p,dN:()=>n,hd:()=>o,of:()=>d,y3:()=>s,zt:()=>m});let n="nxtP",s="x-prerender-revalidate",i="x-prerender-revalidate-if-generated",a=".prefetch.rsc",o=".rsc",l=".json",u=".meta",c="x-next-cache-tags",h="x-next-cache-soft-tags",d="x-next-revalidated-tags",f="x-next-revalidate-tag-token",p=64,g=256,m="_N_T_",y=31536e3,v={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route",appRouteHandler:"app-route-handler"};({...v,GROUP:{serverOnly:[v.reactServerComponents,v.actionBrowser,v.appMetadataRoute,v.appRouteHandler,v.instrument],clientOnly:[v.serverSideRendering,v.appPagesBrowser],nonClientServerTarget:[v.middleware,v.api],app:[v.reactServerComponents,v.actionBrowser,v.appMetadataRoute,v.appRouteHandler,v.serverSideRendering,v.appPagesBrowser,v.shared,v.instrument]}})},828:(e,t,r)=>{"use strict";r.d(t,{FI:()=>o,TP:()=>l,fl:()=>u});var n=r(908),s=r(363),i=r(439);let a="function"==typeof n.unstable_postpone;function o(e){return{isDebugSkeleton:e,dynamicAccesses:[]}}function l(e,t){let r=new URL(e.urlPathname,"http://n").pathname;if(e.isUnstableCacheCallback)throw Error(`Route ${r} used "${t}" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "${t}" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`);if(e.dynamicShouldError)throw new i.G(`Route ${r} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(e.prerenderState)c(e.prerenderState,t,r);else if(e.revalidate=0,e.isStaticGeneration){let n=new s.DynamicServerError(`Route ${r} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=t,e.dynamicUsageStack=n.stack,n}}function u(e,t){e.prerenderState&&c(e.prerenderState,t,e.urlPathname)}function c(e,t,r){!function(){if(!a)throw Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js")}();let s=`Route ${r} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`;e.dynamicAccesses.push({stack:e.isDebugSkeleton?Error().stack:void 0,expression:t}),n.unstable_postpone(s)}},988:(e,t,r)=>{"use strict";r.d(t,{B:()=>d});var n=r(39),s=r(665),i=r(776),a=r(101),o=r(927);r(991),r(816);let l="__prerender_bypass";Symbol("__next_preview_data"),Symbol(l);class u{constructor(e,t,r,n){var i;let a=e&&function(e,t){let r=s.h.from(e.headers);return{isOnDemandRevalidate:r.get(o.y3)===t.previewModeId,revalidateOnlyGenerated:r.has(o.Qq)}}(t,e).isOnDemandRevalidate,u=null==(i=r.get(l))?void 0:i.value;this.isEnabled=!!(!a&&u&&e&&u===e.previewModeId),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=n}enable(){if(!this._previewModeId)throw Error("Invariant: previewProps missing previewModeId this should never happen");this._mutableCookies.set({name:l,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"})}disable(){this._mutableCookies.set({name:l,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)})}}var c=r(573);function h(e,t){if("x-middleware-set-cookie"in e.headers&&"string"==typeof e.headers["x-middleware-set-cookie"]){let r=e.headers["x-middleware-set-cookie"],n=new Headers;for(let e of(0,c.l$)(r))n.append("set-cookie",e);for(let e of new a.nV(n).getAll())t.set(e)}}let d={wrap(e,{req:t,res:r,renderOpts:o},l){let c;function d(e){r&&r.setHeader("Set-Cookie",e)}o&&"previewProps"in o&&(c=o.previewProps);let f={},p={get headers(){return f.headers||(f.headers=function(e){let t=s.h.from(e);for(let e of n.vu)t.delete(e.toString().toLowerCase());return s.h.seal(t)}(t.headers)),f.headers},get cookies(){if(!f.cookies){let e=new a.qC(s.h.from(t.headers));h(t,e),f.cookies=i.Qb.seal(e)}return f.cookies},get mutableCookies(){if(!f.mutableCookies){let e=function(e,t){let r=new a.qC(s.h.from(e));return i.vr.wrap(r,t)}(t.headers,(null==o?void 0:o.onUpdateCookies)||(r?d:void 0));h(t,e),f.mutableCookies=e}return f.mutableCookies},get draftMode(){return f.draftMode||(f.draftMode=new u(c,t,this.cookies,this.mutableCookies)),f.draftMode},reactLoadableManifest:(null==o?void 0:o.reactLoadableManifest)||{},assetPrefix:(null==o?void 0:o.assetPrefix)||""};return e.run(p,l,p)}}},561:(e,t,r)=>{e.exports=r(403)},403:(e,t,r)=>{"use strict";r.d(t,{AppRouteRouteModule:()=>j});var n,s,i={};r.r(i),r.d(i,{AppRouterContext:()=>R,GlobalLayoutRouterContext:()=>P,LayoutRouterContext:()=>A,MissingSlotContext:()=>T,TemplateContext:()=>O});var a={};r.r(a),r.d(a,{appRouterContext:()=>i});class o{constructor({userland:e,definition:t}){this.userland=e,this.definition=t}}var l=r(988),u=r(828);let c={wrap(e,{urlPathname:t,renderOpts:r,requestEndedState:n},s){let i=!r.supportsDynamicResponse&&!r.isDraftMode&&!r.isServerAction,a=i&&r.experimental.ppr?(0,u.FI)(r.isDebugPPRSkeleton):null,o={isStaticGeneration:i,urlPathname:t,pagePath:r.originalPathname,incrementalCache:r.incrementalCache||globalThis.__incrementalCache,isRevalidate:r.isRevalidate,isPrerendering:r.nextExport,fetchCache:r.fetchCache,isOnDemandRevalidate:r.isOnDemandRevalidate,isDraftMode:r.isDraftMode,prerenderState:a,requestEndedState:n};return r.store=o,e.run(o,s,o)}};var h=r(776);function d(){return new Response(null,{status:400})}function f(){return new Response(null,{status:405})}let p=["GET","HEAD","OPTIONS","POST","PUT","DELETE","PATCH"];var g=r(861),m=r(991),y=r(816),v=r(983);let w=(0,r(228).P)();!function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(n||(n={}));function b(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,s,i]=e.digest.split(";",4),a=Number(i);return"NEXT_REDIRECT"===t&&("replace"===r||"push"===r)&&"string"==typeof s&&!isNaN(a)&&a in n}!function(e){e.push="push",e.replace="replace"}(s||(s={})),r(583);let _=["HEAD","OPTIONS"];var x=r(665),S=r(363),E=r(182);let C=r(796).createClientModuleProxy,R=C(String.raw`/Users/Romain/Documents/Site cv lm/romaincv/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js#AppRouterContext`),A=C(String.raw`/Users/Romain/Documents/Site cv lm/romaincv/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js#LayoutRouterContext`),P=C(String.raw`/Users/Romain/Documents/Site cv lm/romaincv/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js#GlobalLayoutRouterContext`),O=C(String.raw`/Users/Romain/Documents/Site cv lm/romaincv/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js#TemplateContext`),T=C(String.raw`/Users/Romain/Documents/Site cv lm/romaincv/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js#MissingSlotContext`);var k=r(39),$=r(676),I=r(439),N=r(42);class j extends o{static #e=this.sharedModules=a;constructor({userland:e,definition:t,resolvedPagePath:r,nextConfigOutput:n}){if(super({userland:e,definition:t}),this.requestAsyncStorage=v.O,this.staticGenerationAsyncStorage=E.A,this.serverHooks=S,this.actionAsyncStorage=w,this.resolvedPagePath=r,this.nextConfigOutput=n,this.methods=function(e){let t=p.reduce((t,r)=>({...t,[r]:e[r]??f}),{}),r=new Set(p.filter(t=>e[t]));for(let n of _.filter(e=>!r.has(e))){if("HEAD"===n){e.GET&&(t.HEAD=e.GET,r.add("HEAD"));continue}if("OPTIONS"===n){let e=["OPTIONS",...r];!r.has("HEAD")&&r.has("GET")&&e.push("HEAD");let n={Allow:e.sort().join(", ")};t.OPTIONS=()=>new Response(null,{status:204,headers:n}),r.add("OPTIONS");continue}throw Error(`Invariant: should handle all automatic implementable methods, got method: ${n}`)}return t}(e),this.hasNonStaticMethods=function(e){return!!e.POST||!!e.POST||!!e.DELETE||!!e.PATCH||!!e.OPTIONS}(e),this.dynamic=this.userland.dynamic,"export"===this.nextConfigOutput){if(this.dynamic&&"auto"!==this.dynamic){if("force-dynamic"===this.dynamic)throw Error(`export const dynamic = "force-dynamic" on page "${t.pathname}" cannot be used with "output: export". See more info here: https://nextjs.org/docs/advanced-features/static-html-export`)}else this.dynamic="error"}}resolve(e){return p.includes(e)?this.methods[e]:d}async execute(e,t){let r=this.resolve(e.method),n={req:e};n.renderOpts={previewProps:t.prerenderManifest.preview};let s={urlPathname:e.nextUrl.pathname,renderOpts:t.renderOpts};s.renderOpts.fetchCache=this.userland.fetchCache;let i=await this.actionAsyncStorage.run({isAppRoute:!0,isAction:function(e){let t,r;e.headers instanceof Headers?(t=e.headers.get(k.om.toLowerCase())??null,r=e.headers.get("content-type")):(t=e.headers[k.om.toLowerCase()]??null,r=e.headers["content-type"]??null);let n=!!("POST"===e.method&&"application/x-www-form-urlencoded"===r),s=!!("POST"===e.method&&(null==r?void 0:r.startsWith("multipart/form-data"))),i=!!(void 0!==t&&"string"==typeof t&&"POST"===e.method);return{actionId:t,isURLEncodedAction:n,isMultipartAction:s,isFetchAction:i,isServerAction:!!(i||n||s)}}(e).isServerAction},()=>l.B.wrap(this.requestAsyncStorage,n,()=>c.wrap(this.staticGenerationAsyncStorage,s,n=>{var s;let i=n.isStaticGeneration;if(this.hasNonStaticMethods){if(i){let e=new S.DynamicServerError("Route is configured with methods that cannot be statically generated.");throw n.dynamicUsageDescription=e.message,n.dynamicUsageStack=e.stack,e}n.revalidate=0}let a=e;switch(this.dynamic){case"force-dynamic":n.forceDynamic=!0;break;case"force-static":n.forceStatic=!0,a=new Proxy(e,W);break;case"error":n.dynamicShouldError=!0,i&&(a=new Proxy(e,V));break;default:a=function(e,t){let r={get(e,n,s){switch(n){case"search":case"searchParams":case"url":case"href":case"toJSON":case"toString":case"origin":return(0,u.TP)(t,`nextUrl.${n}`),N.g.get(e,n,s);case"clone":return e[L]||(e[L]=()=>new Proxy(e.clone(),r));default:return N.g.get(e,n,s)}}},n={get(e,s){switch(s){case"nextUrl":return e[M]||(e[M]=new Proxy(e.nextUrl,r));case"headers":case"cookies":case"url":case"body":case"blob":case"json":case"text":case"arrayBuffer":case"formData":return(0,u.TP)(t,`request.${s}`),N.g.get(e,s,e);case"clone":return e[D]||(e[D]=()=>new Proxy(e.clone(),n));default:return N.g.get(e,s,e)}}};return new Proxy(e,n)}(e,n)}n.revalidate??=this.userland.revalidate??!1;let o=function(e){let t="/app/";e.includes(t)||(t="\\app\\");let[,...r]=e.split(t);return(t[0]+r.join(t)).split(".").slice(0,-1).join(".")}(this.resolvedPagePath);return null==(s=(0,m.Yz)().getRootSpanAttributes())||s.set("next.route",o),(0,m.Yz)().trace(y.PB.runHandler,{spanName:`executing api route (app) ${o}`,attributes:{"next.route":o}},async()=>{var e,s;(0,g.XH)({serverHooks:this.serverHooks,staticGenerationAsyncStorage:this.staticGenerationAsyncStorage});let i=await r(a,{params:t.params?function(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}(t.params):void 0});if(!(i instanceof Response))throw Error(`No response is returned from route handler '${this.resolvedPagePath}'. Ensure you return a \`Response\` or a \`NextResponse\` in all branches of your handler.`);t.renderOpts.fetchMetrics=n.fetchMetrics,t.renderOpts.waitUntil=Promise.all([null==(e=n.incrementalCache)?void 0:e.revalidateTag(n.revalidatedTags||[]),...Object.values(n.pendingRevalidates||{})]),(0,g.RQ)(n),t.renderOpts.fetchTags=null==(s=n.tags)?void 0:s.join(",");let o=this.requestAsyncStorage.getStore();if(o&&o.mutableCookies){let e=new Headers(i.headers);if((0,h._5)(e,o.mutableCookies))return new Response(i.body,{status:i.status,statusText:i.statusText,headers:e})}return i})})));if(!(i instanceof Response))return new Response(null,{status:500});if(i.headers.has("x-middleware-rewrite"))throw Error("NextResponse.rewrite() was used in a app route handler, this is not currently supported. Please remove the invocation to continue.");if("1"===i.headers.get("x-middleware-next"))throw Error("NextResponse.next() was used in a app route handler, this is not supported. See here for more info: https://nextjs.org/docs/messages/next-response-next-in-app-route-handler");return i}async handle(e,t){try{return await this.execute(e,t)}catch(t){let e=function(e){if(b(e)){let t=b(e)?e.digest.split(";",3)[2]:null;if(!t)throw Error("Invariant: Unexpected redirect url format");let r=function(e){if(!b(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(e);return function(e,t,r){let n=new Headers({location:e});return(0,h._5)(n,t),new Response(null,{status:r,headers:n})}(t,e.mutableCookies,r)}return"object"==typeof e&&null!==e&&"digest"in e&&"NEXT_NOT_FOUND"===e.digest&&new Response(null,{status:404})}(t);if(!e)throw t;return e}}}let M=Symbol("nextUrl"),D=Symbol("clone"),L=Symbol("clone"),U=Symbol("searchParams"),q=Symbol("href"),H=Symbol("toString"),F=Symbol("headers"),B=Symbol("cookies"),W={get(e,t,r){switch(t){case"headers":return e[F]||(e[F]=x.h.seal(new Headers({})));case"cookies":return e[B]||(e[B]=h.Qb.seal(new $.RequestCookies(new Headers({}))));case"nextUrl":return e[M]||(e[M]=new Proxy(e.nextUrl,J));case"url":return r.nextUrl.href;case"geo":case"ip":return;case"clone":return e[D]||(e[D]=()=>new Proxy(e.clone(),W));default:return N.g.get(e,t,r)}}},J={get(e,t,r){switch(t){case"search":return"";case"searchParams":return e[U]||(e[U]=new URLSearchParams);case"href":return e[q]||(e[q]=function(e){let t=new URL(e);return t.host="localhost:3000",t.search="",t.protocol="http",t}(e.href).href);case"toJSON":case"toString":return e[H]||(e[H]=()=>r.href);case"url":return;case"clone":return e[L]||(e[L]=()=>new Proxy(e.clone(),J));default:return N.g.get(e,t,r)}}},V={get(e,t,r){switch(t){case"nextUrl":return e[M]||(e[M]=new Proxy(e.nextUrl,X));case"headers":case"cookies":case"url":case"body":case"blob":case"json":case"text":case"arrayBuffer":case"formData":throw new I.G(`Route ${e.nextUrl.pathname} with \`dynamic = "error"\` couldn't be rendered statically because it used \`request.${t}\`.`);case"clone":return e[D]||(e[D]=()=>new Proxy(e.clone(),V));default:return N.g.get(e,t,r)}}},X={get(e,t,r){switch(t){case"search":case"searchParams":case"url":case"href":case"toJSON":case"toString":case"origin":throw new I.G(`Route ${e.pathname} with \`dynamic = "error"\` couldn't be rendered statically because it used \`nextUrl.${t}\`.`);case"clone":return e[L]||(e[L]=()=>new Proxy(e.clone(),X));default:return N.g.get(e,t,r)}}}},861:(e,t,r)=>{"use strict";r.d(t,{RQ:()=>c,XH:()=>d});var n=r(816),s=r(991),i=r(927),a=r(583),o=r(828),l=r(195).Buffer;let u=e=>{let t=["/layout"];if(e.startsWith("/")){let r=e.split("/");for(let e=1;e<r.length+1;e++){let n=r.slice(0,e).join("/");n&&(n.endsWith("/page")||n.endsWith("/route")||(n=`${n}${n.endsWith("/")?"":"/"}layout`),t.push(n))}}return t};function c(e){var t,r;let n=[],{pagePath:s,urlPathname:a}=e;if(Array.isArray(e.tags)||(e.tags=[]),s)for(let r of u(s))r=`${i.zt}${r}`,(null==(t=e.tags)?void 0:t.includes(r))||e.tags.push(r),n.push(r);if(a){let t=new URL(a,"http://n").pathname,s=`${i.zt}${t}`;(null==(r=e.tags)?void 0:r.includes(s))||e.tags.push(s),n.push(s)}return n}function h(e,t){var r;e&&(null==(r=e.requestEndedState)||r.ended)}function d(e){var t;if("__nextPatched"in(t=globalThis.fetch)&&!0===t.__nextPatched)return;let r=globalThis.fetch;globalThis.fetch=function(e,{serverHooks:{DynamicServerError:t},staticGenerationAsyncStorage:r}){let u=async(u,d)=>{var f,p;let g;try{(g=new URL(u instanceof Request?u.url:u)).username="",g.password=""}catch{g=void 0}let m=(null==g?void 0:g.href)??"",y=Date.now(),v=(null==d?void 0:null==(f=d.method)?void 0:f.toUpperCase())||"GET",w=(null==d?void 0:null==(p=d.next)?void 0:p.internal)===!0,b="1"===process.env.NEXT_OTEL_FETCH_DISABLED;return(0,s.Yz)().trace(w?n.Xy.internalFetch:n.k0.fetch,{hideSpan:b,kind:s.MU.CLIENT,spanName:["fetch",v,m].filter(Boolean).join(" "),attributes:{"http.url":m,"http.method":v,"net.peer.name":null==g?void 0:g.hostname,"net.peer.port":(null==g?void 0:g.port)||void 0}},async()=>{var n;let s,f,p;if(w)return e(u,d);let g=r.getStore();if(!g||g.isDraftMode)return e(u,d);let v=u&&"object"==typeof u&&"string"==typeof u.method,b=e=>(null==d?void 0:d[e])||(v?u[e]:null),_=e=>{var t,r,n;return void 0!==(null==d?void 0:null==(t=d.next)?void 0:t[e])?null==d?void 0:null==(r=d.next)?void 0:r[e]:v?null==(n=u.next)?void 0:n[e]:void 0},x=_("revalidate"),S=function(e,t){let r=[],n=[];for(let s=0;s<e.length;s++){let a=e[s];if("string"!=typeof a?n.push({tag:a,reason:"invalid type, must be a string"}):a.length>i.Ho?n.push({tag:a,reason:`exceeded max length of ${i.Ho}`}):r.push(a),r.length>i.cv){console.warn(`Warning: exceeded max tag count for ${t}, dropped tags:`,e.slice(s).join(", "));break}}if(n.length>0)for(let{tag:e,reason:r}of(console.warn(`Warning: invalid tags passed to ${t}: `),n))console.log(`tag: "${e}" ${r}`);return r}(_("tags")||[],`fetch ${u.toString()}`);if(Array.isArray(S))for(let e of(g.tags||(g.tags=[]),S))g.tags.includes(e)||g.tags.push(e);let E=c(g),C=g.fetchCache,R=!!g.isUnstableNoStore,A=b("cache"),P="";"string"==typeof A&&void 0!==x&&(v&&"default"===A||a.ZK(`fetch for ${m} on ${g.urlPathname} specified "cache: ${A}" and "revalidate: ${x}", only one should be specified.`),A=void 0),"force-cache"===A?x=!1:("no-cache"===A||"no-store"===A||"force-no-store"===C||"only-no-store"===C)&&(x=0),("no-cache"===A||"no-store"===A)&&(P=`cache: ${A}`),p=function(e,t){try{let r;if(!1===e)r=e;else if("number"==typeof e&&!isNaN(e)&&e>-1)r=e;else if(void 0!==e)throw Error(`Invalid revalidate value "${e}" on "${t}", must be a non-negative number or "false"`);return r}catch(e){if(e instanceof Error&&e.message.includes("Invalid revalidate"))throw e;return}}(x,g.urlPathname);let O=b("headers"),T="function"==typeof(null==O?void 0:O.get)?O:new Headers(O||{}),k=T.get("authorization")||T.get("cookie"),$=!["get","head"].includes((null==(n=b("method"))?void 0:n.toLowerCase())||"get"),I=(k||$)&&0===g.revalidate;switch(C){case"force-no-store":P="fetchCache = force-no-store";break;case"only-no-store":if("force-cache"===A||void 0!==p&&(!1===p||p>0))throw Error(`cache: 'force-cache' used on fetch for ${m} with 'export const fetchCache = 'only-no-store'`);P="fetchCache = only-no-store";break;case"only-cache":if("no-store"===A)throw Error(`cache: 'no-store' used on fetch for ${m} with 'export const fetchCache = 'only-cache'`);break;case"force-cache":(void 0===x||0===x)&&(P="fetchCache = force-cache",p=!1)}void 0===p?"default-cache"===C?(p=!1,P="fetchCache = default-cache"):I?(p=0,P="auto no cache"):"default-no-store"===C?(p=0,P="fetchCache = default-no-store"):R?(p=0,P="noStore call"):(P="auto cache",p="boolean"!=typeof g.revalidate&&void 0!==g.revalidate&&g.revalidate):P||(P=`revalidate: ${p}`),g.forceStatic&&0===p||I||void 0!==g.revalidate&&("number"!=typeof p||!1!==g.revalidate&&("number"!=typeof g.revalidate||!(p<g.revalidate)))||(0===p&&(0,o.fl)(g,"revalidate: 0"),g.revalidate=p);let N="number"==typeof p&&p>0||!1===p;if(g.incrementalCache&&N)try{s=await g.incrementalCache.fetchCacheKey(m,v?u:d)}catch(e){console.error("Failed to generate cache key for",u)}let j=g.nextFetchId??1;g.nextFetchId=j+1;let M="number"!=typeof p?i.BR:p,D=async(t,r)=>{let n=["cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","window","duplex",...t?[]:["signal"]];if(v){let e=u,t={body:e._ogBody||e.body};for(let r of n)t[r]=e[r];u=new Request(e.url,t)}else if(d){let{_ogBody:e,body:r,signal:n,...s}=d;d={...s,body:e||r,signal:t?void 0:n}}let i={...d,next:{...null==d?void 0:d.next,fetchType:"origin",fetchIdx:j}};return e(u,i).then(async e=>{if(t||h(g,{start:y,url:m,cacheReason:r||P,cacheStatus:0===p||r?"skip":"miss",status:e.status,method:i.method||"GET"}),200===e.status&&g.incrementalCache&&s&&N){let t=l.from(await e.arrayBuffer());try{await g.incrementalCache.set(s,{kind:"FETCH",data:{headers:Object.fromEntries(e.headers.entries()),body:t.toString("base64"),status:e.status,url:e.url},revalidate:M},{fetchCache:!0,revalidate:p,fetchUrl:m,fetchIdx:j,tags:S})}catch(e){console.warn("Failed to set fetch cache",u,e)}let r=new Response(t,{headers:new Headers(e.headers),status:e.status});return Object.defineProperty(r,"url",{value:e.url}),r}return e})},L=()=>Promise.resolve(),U=!1;if(s&&g.incrementalCache){L=await g.incrementalCache.lock(s);let e=g.isOnDemandRevalidate?null:await g.incrementalCache.get(s,{kindHint:"fetch",revalidate:p,fetchUrl:m,fetchIdx:j,tags:S,softTags:E});if(e?await L():f="cache-control: no-cache (hard refresh)",(null==e?void 0:e.value)&&"FETCH"===e.value.kind){if(g.isRevalidate&&e.isStale)U=!0;else{e.isStale&&(g.pendingRevalidates??={},g.pendingRevalidates[s]||(g.pendingRevalidates[s]=D(!0).catch(console.error).finally(()=>{g.pendingRevalidates??={},delete g.pendingRevalidates[s||""]})));let t=e.value.data;h(g,{start:y,url:m,cacheReason:P,cacheStatus:"hit",status:t.status||200,method:(null==d?void 0:d.method)||"GET"});let r=new Response(l.from(t.body,"base64"),{headers:t.headers,status:t.status});return Object.defineProperty(r,"url",{value:e.value.data.url}),r}}}if(g.isStaticGeneration&&d&&"object"==typeof d){let{cache:e}=d;if(delete d.cache,!g.forceStatic&&"no-store"===e){let e=`no-store fetch ${u}${g.urlPathname?` ${g.urlPathname}`:""}`;(0,o.fl)(g,e),g.revalidate=0;let r=new t(e);throw g.dynamicUsageErr=r,g.dynamicUsageDescription=e,r}let r="next"in d,{next:n={}}=d;if("number"==typeof n.revalidate&&(void 0===g.revalidate||"number"==typeof g.revalidate&&n.revalidate<g.revalidate)){if(!g.forceDynamic&&!g.forceStatic&&0===n.revalidate){let e=`revalidate: 0 fetch ${u}${g.urlPathname?` ${g.urlPathname}`:""}`;(0,o.fl)(g,e);let r=new t(e);throw g.dynamicUsageErr=r,g.dynamicUsageDescription=e,r}g.forceStatic&&0===n.revalidate||(g.revalidate=n.revalidate)}r&&delete d.next}if(!s||!U)return D(!1,f).finally(L);{g.pendingRevalidates??={};let e=g.pendingRevalidates[s];return e?(await e).clone():g.pendingRevalidates[s]=D(!0,f).then(e=>e.clone()).finally(async()=>{g.pendingRevalidates??={},delete g.pendingRevalidates[s||""],await L()})}})};return u.__nextPatched=!0,u.__nextGetStaticStore=()=>r,u._nextOriginalFetch=e,u}(r,e)}},816:(e,t,r)=>{"use strict";var n,s,i,a,o,l,u,c,h,d,f,p;r.d(t,{PB:()=>d,Xy:()=>a,dI:()=>p,hT:()=>m,k0:()=>u,lw:()=>g}),function(e){e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404"}(n||(n={})),function(e){e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents"}(s||(s={})),function(e){e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer"}(i||(i={})),function(e){e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.createComponentTree="NextNodeServer.createComponentTree",e.clientComponentLoading="NextNodeServer.clientComponentLoading",e.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.startResponse="NextNodeServer.startResponse",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch"}(a||(a={})),(o||(o={})).startServer="startServer.startServer",function(e){e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult"}(l||(l={})),function(e){e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch"}(u||(u={})),(c||(c={})).executeRoute="Router.executeRoute",(h||(h={})).runHandler="Node.runHandler",(d||(d={})).runHandler="AppRouteRouteHandlers.runHandler",function(e){e.generateMetadata="ResolveMetadata.generateMetadata",e.generateViewport="ResolveMetadata.generateViewport"}(f||(f={})),(p||(p={})).execute="Middleware.execute";let g=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],m=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]},991:(e,t,r)=>{"use strict";let n;r.d(t,{MU:()=>u,Yz:()=>v});var s=r(816);let{context:i,propagation:a,trace:o,SpanStatusCode:l,SpanKind:u,ROOT_CONTEXT:c}=n=r(723),h=e=>null!==e&&"object"==typeof e&&"function"==typeof e.then,d=(e,t)=>{(null==t?void 0:t.bubble)===!0?e.setAttribute("next.bubble",!0):(t&&e.recordException(t),e.setStatus({code:l.ERROR,message:null==t?void 0:t.message})),e.end()},f=new Map,p=n.createContextKey("next.rootSpanId"),g=0,m=()=>g++;class y{getTracerInstance(){return o.getTracer("next.js","0.0.1")}getContext(){return i}getActiveScopeSpan(){return o.getSpan(null==i?void 0:i.active())}withPropagatedContext(e,t,r){let n=i.active();if(o.getSpanContext(n))return t();let s=a.extract(n,e,r);return i.with(s,t)}trace(...e){var t;let[r,n,a]=e,{fn:l,options:u}="function"==typeof n?{fn:n,options:{}}:{fn:a,options:{...n}},g=u.spanName??r;if(!s.lw.includes(r)&&"1"!==process.env.NEXT_OTEL_VERBOSE||u.hideSpan)return l();let y=this.getSpanContext((null==u?void 0:u.parentSpan)??this.getActiveScopeSpan()),v=!1;y?(null==(t=o.getSpanContext(y))?void 0:t.isRemote)&&(v=!0):(y=(null==i?void 0:i.active())??c,v=!0);let w=m();return u.attributes={"next.span_name":g,"next.span_type":r,...u.attributes},i.with(y.setValue(p,w),()=>this.getTracerInstance().startActiveSpan(g,u,e=>{let t="performance"in globalThis?globalThis.performance.now():void 0,n=()=>{f.delete(w),t&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&s.hT.includes(r||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(r.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:t,end:performance.now()})};v&&f.set(w,new Map(Object.entries(u.attributes??{})));try{if(l.length>1)return l(e,t=>d(e,t));let t=l(e);if(h(t))return t.then(t=>(e.end(),t)).catch(t=>{throw d(e,t),t}).finally(n);return e.end(),n(),t}catch(t){throw d(e,t),n(),t}}))}wrap(...e){let t=this,[r,n,a]=3===e.length?e:[e[0],{},e[1]];return s.lw.includes(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof a&&(e=e.apply(this,arguments));let s=arguments.length-1,o=arguments[s];if("function"!=typeof o)return t.trace(r,e,()=>a.apply(this,arguments));{let n=t.getContext().bind(i.active(),o);return t.trace(r,e,(e,t)=>(arguments[s]=function(e){return null==t||t(e),n.apply(this,arguments)},a.apply(this,arguments)))}}:a}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?o.setSpan(i.active(),e):void 0}getRootSpanAttributes(){let e=i.active().getValue(p);return f.get(e)}}let v=(()=>{let e=new y;return()=>e})()},665:(e,t,r)=>{"use strict";r.d(t,{h:()=>i});var n=r(42);class s extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new s}}class i extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,s){if("symbol"==typeof r)return n.g.get(t,r,s);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);if(void 0!==a)return n.g.get(t,a,s)},set(t,r,s,i){if("symbol"==typeof r)return n.g.set(t,r,s,i);let a=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);return n.g.set(t,o??r,s,i)},has(t,r){if("symbol"==typeof r)return n.g.has(t,r);let s=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===s);return void 0!==i&&n.g.has(t,i)},deleteProperty(t,r){if("symbol"==typeof r)return n.g.deleteProperty(t,r);let s=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===s);return void 0===i||n.g.deleteProperty(t,i)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return s.callable;default:return n.g.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new i(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},42:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});class n{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},776:(e,t,r)=>{"use strict";r.d(t,{Qb:()=>o,_5:()=>u,vr:()=>c});var n=r(101),s=r(42),i=r(182);class a extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new a}}class o{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return a.callable;default:return s.g.get(e,t,r)}}})}}let l=Symbol.for("next.mutated.cookies");function u(e,t){let r=function(e){let t=e[l];return t&&Array.isArray(t)&&0!==t.length?t:[]}(t);if(0===r.length)return!1;let s=new n.nV(e),i=s.getAll();for(let e of r)s.set(e);for(let e of i)s.set(e);return!0}class c{static wrap(e,t){let r=new n.nV(new Headers);for(let t of e.getAll())r.set(t);let a=[],o=new Set,u=()=>{let e=i.A.getStore();if(e&&(e.pathWasRevalidated=!0),a=r.getAll().filter(e=>o.has(e.name)),t){let e=[];for(let t of a){let r=new n.nV(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case l:return a;case"delete":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{u()}};case"set":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{u()}};default:return s.g.get(e,t,r)}}})}}},101:(e,t,r)=>{"use strict";r.d(t,{Q7:()=>n.stringifyCookie,nV:()=>n.ResponseCookies,qC:()=>n.RequestCookies});var n=r(676)},573:(e,t,r)=>{"use strict";function n(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function s(e){var t,r,n,s,i,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,i=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),s=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(i=!0,o=s,a.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!i||o>=e.length)&&a.push(e.substring(t,e.length))}return a}function i(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...s(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function a(e){try{return String(new URL(String(e)))}catch(t){throw Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t})}}r.d(t,{EK:()=>n,l$:()=>s,lb:()=>i,r4:()=>a})},863:(e,t,r)=>{"use strict";let n;n=r(914),e.exports=n},37:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getTestReqInfo:function(){return a},withRequest:function(){return i}});let n=new(r(67)).AsyncLocalStorage;function s(e,t){let r=t.header(e,"next-test-proxy-port");if(r)return{url:t.url(e),proxyPort:Number(r),testData:t.header(e,"next-test-data")||""}}function i(e,t,r){let i=s(e,t);return i?n.run(i,r):r()}function a(e,t){return n.getStore()||(e&&t?s(e,t):void 0)}},818:(e,t,r)=>{"use strict";var n=r(195).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{handleFetch:function(){return o},interceptFetch:function(){return l},reader:function(){return i}});let s=r(37),i={url:e=>e.url,header:(e,t)=>e.headers.get(t)};async function a(e,t){let{url:r,method:s,headers:i,body:a,cache:o,credentials:l,integrity:u,mode:c,redirect:h,referrer:d,referrerPolicy:f}=t;return{testData:e,api:"fetch",request:{url:r,method:s,headers:[...Array.from(i),["next-test-stack",function(){let e=(Error().stack??"").split("\n");for(let t=1;t<e.length;t++)if(e[t].length>0){e=e.slice(t);break}return(e=(e=(e=e.filter(e=>!e.includes("/next/dist/"))).slice(0,5)).map(e=>e.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}()]],body:a?n.from(await t.arrayBuffer()).toString("base64"):null,cache:o,credentials:l,integrity:u,mode:c,redirect:h,referrer:d,referrerPolicy:f}}}async function o(e,t){let r=(0,s.getTestReqInfo)(t,i);if(!r)return e(t);let{testData:o,proxyPort:l}=r,u=await a(o,t),c=await e(`http://localhost:${l}`,{method:"POST",body:JSON.stringify(u),next:{internal:!0}});if(!c.ok)throw Error(`Proxy request failed: ${c.status}`);let h=await c.json(),{api:d}=h;switch(d){case"continue":return e(t);case"abort":case"unhandled":throw Error(`Proxy request aborted [${t.method} ${t.url}]`)}return function(e){let{status:t,headers:r,body:s}=e.response;return new Response(s?n.from(s,"base64"):null,{status:t,headers:new Headers(r)})}(h)}function l(e){return r.g.fetch=function(t,r){var n;return(null==r?void 0:null==(n=r.next)?void 0:n.internal)?e(t,r):o(e,new Request(t,r))},()=>{r.g.fetch=e}}},730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{interceptTestApis:function(){return i},wrapRequestHandler:function(){return a}});let n=r(37),s=r(818);function i(){return(0,s.interceptFetch)(r.g.fetch)}function a(e){return(t,r)=>(0,n.withRequest)(t,s.reader,()=>e(t,r))}},228:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});let n=Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class s{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}}let i=globalThis.AsyncLocalStorage;function a(){return i?new i:new s}},983:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});let n=(0,r(228).P)()},182:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(228).P)()}},e=>{var t=e(e.s=581);(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/api/chat/route"]=t}]);
//# sourceMappingURL=route.js.map